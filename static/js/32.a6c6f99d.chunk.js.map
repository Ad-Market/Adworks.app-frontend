{"version":3,"sources":["../node_modules/@uppy/webcam/lib/CameraIcon.js","../node_modules/@uppy/utils/lib/NetworkError.js","../node_modules/@uppy/webcam/lib/index.js","../node_modules/@uppy/utils/lib/getFileTypeExtension.js","../node_modules/@uppy/utils/lib/canvasToBlob.js","../node_modules/@uppy/webcam/lib/supportsMediaRecorder.js","../node_modules/@uppy/webcam/lib/CameraScreen.js","../node_modules/@uppy/webcam/lib/SnapshotButton.js","../node_modules/@uppy/webcam/lib/RecordButton.js","../node_modules/@uppy/webcam/lib/RecordingLength.js","../node_modules/@uppy/webcam/lib/formatSeconds.js","../node_modules/@uppy/webcam/lib/VideoSourceSelect.js","../node_modules/@uppy/webcam/lib/SubmitButton.js","../node_modules/@uppy/webcam/lib/DiscardButton.js","../node_modules/@uppy/webcam/lib/PermissionsScreen.js","../node_modules/@uppy/xhr-upload/lib/index.js","../node_modules/@uppy/companion-client/lib/index.js","../node_modules/@uppy/companion-client/lib/AuthError.js","../node_modules/@uppy/utils/lib/fetchWithNetworkError.js","../node_modules/@uppy/companion-client/lib/Provider.js","../node_modules/qs-stringify/index.js","../node_modules/url-parse/index.js","../node_modules/requires-port/index.js","../node_modules/querystringify/index.js","../node_modules/@uppy/companion-client/lib/tokenStorage.js","../node_modules/@uppy/companion-client/lib/SearchProvider.js","../node_modules/@uppy/companion-client/lib/Socket.js","../node_modules/@uppy/utils/lib/emitSocketProgress.js","../node_modules/@uppy/utils/lib/getSocketHost.js","../node_modules/@uppy/utils/lib/settle.js","../node_modules/@uppy/utils/lib/EventTracker.js","../node_modules/@uppy/utils/lib/ProgressTimeout.js","../node_modules/@uppy/utils/lib/RateLimitedQueue.js","../node_modules/@uppy/utils/lib/isNetworkError.js","../node_modules/reactstrap/es/Card.js","../node_modules/reactstrap/es/Row.js","../node_modules/reactstrap/es/Col.js","../node_modules/reactstrap/es/Breadcrumb.js","../node_modules/reactstrap/es/BreadcrumbItem.js","../node_modules/reactstrap/es/Input.js","../node_modules/reactstrap/es/Label.js","../node_modules/@uppy/companion-client/lib/RequestClient.js"],"names":["h","require","module","exports","props","focusable","fill","width","height","viewBox","d","fillRule","_wrapNativeSuper","Class","_cache","Map","undefined","fn","Function","toString","call","indexOf","TypeError","has","get","set","Wrapper","_construct","arguments","_getPrototypeOf","this","constructor","prototype","Object","create","value","enumerable","writable","configurable","_setPrototypeOf","Parent","args","_isNativeReflectConstruct","Reflect","construct","a","push","apply","instance","bind","sham","Proxy","Boolean","valueOf","e","o","p","setPrototypeOf","__proto__","getPrototypeOf","NetworkError","_Error","subClass","superClass","error","xhr","_this","isNetworkError","request","Error","_class","_temp","_extends","assign","target","i","length","source","key","hasOwnProperty","_assertThisInitialized","self","ReferenceError","Plugin","Translator","getFileTypeExtension","mimeTypes","canvasToBlob","supportsMediaRecorder","CameraIcon","CameraScreen","PermissionsScreen","toMimeType","fileType","slice","isVideoMimeType","mimeType","test","isImageMimeType","_Plugin","Webcam","uppy","opts","mediaDevices","navigator","getUserMedia","_getUserMedia","mozGetUserMedia","webkitGetUserMedia","Promise","resolve","reject","getMediaDevices","supportsUserMedia","protocol","location","match","id","title","type","capturedMediaFile","icon","className","rx","defaultLocale","strings","smile","takePicture","startRecording","stopRecording","allowAccessTitle","allowAccessDescription","noCameraTitle","noCameraDescription","recordingStoppedMaxSize","recordingLength","submitRecordedFile","discardRecordedFile","defaultOptions","onBeforeSnapshot","countdown","modes","mirror","showVideoSourceDropdown","facingMode","preferredImageMimeType","preferredVideoMimeType","showRecordingLength","i18nInit","install","setPluginState","render","start","stop","takeSnapshot","discardRecordedVideo","submit","oneTwoThreeSmile","focus","changeVideoSource","webcamActive","hasCamera","cameraReady","cameraError","recordingLengthSeconds","videoSources","currentDeviceId","_proto","setOptions","newOpts","videoConstraints","translator","locale","i18n","translate","i18nArray","translateArray","hasCameraCheck","enumerateDevices","then","devices","some","device","kind","isAudioOnly","getConstraints","deviceId","_this$opts$videoConst","acceptsAudio","acceptsVideo","audio","video","options","_this2","constraints","stream","tracks","getAudioTracks","getVideoTracks","forEach","track","getSettings","updateVideoSources","catch","err","info","message","getMediaRecorderOptions","MediaRecorder","isTypeSupported","restrictions","preferredVideoMimeTypes","allowedFileTypes","map","filter","acceptableMimeTypes","candidateType","_this3","recorder","recordingChunks","stoppingBecauseOfMaxSize","addEventListener","event","data","maxFileSize","totalSize","reduce","acc","chunk","size","expectedEndChunkSize","Math","max","recordingLengthTimer","setInterval","currentRecordingLength","getPluginState","isRecording","_this4","clearInterval","getVideo","file","recordedVideo","URL","createObjectURL","isRestriction","log","addFile","getVideoElement","el","querySelector","_this5","count","countDown","captureInProgress","setTimeout","_this6","getImage","tagFile","_this7","videoWidth","videoHeight","canvas","document","createElement","getContext","drawImage","preferredImageMimeTypes","ext","name","Date","now","blob","Blob","find","_blob$type","fileExtension","_this8","_this9","webcamState","onChangeVideoSource","onSnapshot","onStartRecording","onStopRecording","onDiscardRecordedVideo","onSubmit","onFocus","onStop","supportsRecording","recording","src","_this10","mount","ondevicechange","restartStream","_this10$getPluginStat","videoSource","uninstall","unmount","VERSION","mimeToExtensions","replace","dataURItoBlob","quality","toBlob","toDataURL","_require","Component","SnapshotButton","RecordButton","RecordingLength","VideoSourceSelect","SubmitButton","DiscardButton","isModeAvailable","mode","_Component","componentDidMount","componentWillUnmount","_this$props","hasRecordedVideo","shouldShowRecordButton","shouldShowSnapshotButton","shouldShowRecordingLength","shouldShowVideoSourceDropdown","videoProps","playsinline","muted","controls","videoElement","srcObject","autoplay","ref","onDiscard","_ref","onClick","x","y","cx","cy","r","formatSeconds","formattedRecordingLengthSeconds","recording_length","seconds","floor","String","padStart","onChange","selected","label","xmlns","cuid","_require2","Provider","RequestClient","Socket","emitSocketProgress","getSocketHost","settle","EventTracker","ProgressTimeout","RateLimitedQueue","buildResponseError","setTypeInBlob","meta","XHRUpload","timedOut","formData","fieldName","method","metaFields","responseUrlFieldName","bundle","headers","timeout","limit","withCredentials","responseType","getResponseData","responseText","response","parsedResponse","JSON","parse","console","getResponseError","validateStatus","status","handleUpload","__queue","requests","uploaderEvents","getOptions","overrides","getState","xhrUpload","addMetadata","Array","isArray","keys","item","append","createFormDataUpload","formPost","FormData","dataWithUpdatedType","createBundledUpload","files","createBareUpload","upload","current","total","emit","XMLHttpRequest","timer","abort","queuedRequest","done","ceil","ev","loaded","progress","lengthComputable","uploader","bytesUploaded","bytesTotal","remove","_body","uploadURL","uploadResp","body","open","toUpperCase","endpoint","run","currentOpts","header","setRequestHeader","send","onFileRemove","onCancelAll","uploadRemote","fields","remote","providerOptions","provider","post","url","fieldname","metadata","httpMethod","useFormData","res","token","host","companionUrl","socket","autoOpen","onRetry","onRetryAll","on","progressData","errData","resp","cause","isPaused","close","uploadBundle","optsFromState","emitError","uploadFiles","promises","parseInt","isRemote","fileID","cb","targetFileID","filesToRetry","getFile","fileIDs","capabilities","setState","individualCancellation","addUploader","removeUploader","SearchProvider","AuthError","isAuthError","fetch","qsStringify","tokenStorage","_RequestClient","split","s","charAt","join","pluginId","tokenKey","companionKeysParams","preAuthToken","all","getAuthToken","authHeaders","btoa","stringify","params","onReceiveResponse","plugin","getPlugin","authenticated","setAuthToken","storage","setItem","getItem","authUrl","queries","uppyPreAuthToken","strigifiedQueries","hostname","fileUrl","fetchPreAuthToken","list","directory","logout","removeItem","_ref2","initPlugin","defaultOpts","serverUrl","serverPattern","companionAllowedHosts","pattern","RegExp","origin","queryStringify","obj","prefix","pairs","pair","enkey","encodeURIComponent","required","qs","slashes","protocolre","windowsDriveLetter","left","trimLeft","str","rules","address","isSpecial","NaN","ignore","hash","query","lolcation","loc","window","global","finaldestination","Url","unescape","pathname","href","scheme","extractProtocol","rest","exec","toLowerCase","forwardSlashes","otherSlashes","slashesCount","parser","relative","extracted","instruction","index","instructions","base","path","concat","last","unshift","up","splice","port","username","password","auth","part","pop","char","ins","result","decode","input","decodeURIComponent","encode","undef","isNaN","localStorage","search","text","ee","UppySocket","_queued","isOpen","emitter","_handleMessage","once","WebSocket","onopen","first","action","payload","onclose","onmessage","handler","throttle","leading","trailing","resolutions","rejections","resolved","rejected","promise","successful","failed","_events","_emitter","off","timeoutHandler","_timeout","_onTimedOut","_isDone","_aliveTimer","clearTimeout","findIndex","createCancelError","Infinity","activeRequests","queuedHandlers","_call","cancelActive","_done","_queueNext","_next","next","shift","_queue","priority","_dequeue","other","queueOptions","wrapPromiseFunction","_len","_key","outerPromise","cancelError","innerPromise","readyState","propTypes","tag","tagPropType","inverse","PropTypes","bool","color","string","outline","cssModule","object","innerRef","oneOfType","func","Card","Tag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","React","defaultProps","rowColsPropType","number","noGutters","form","xs","sm","md","lg","xl","widths","Row","colClasses","colWidth","colSize","isXs","stringOrNumberProp","columnProps","shape","order","offset","array","getColumnSizeClass","Col","columnProp","isObject","_classNames","colSizeInterfix","colClass","_colClass","listTag","listClassName","children","node","Breadcrumb","ListTag","listClasses","active","BreadcrumbItem","bsSize","valid","invalid","plaintext","addon","Input","_React$Component","getRef","_inheritsLoose","checkInput","isNotaNumber","formControlClass","warnOnce","hidden","check","for","Label","htmlFor","_defineProperties","descriptor","defineProperty","fetchWithNetworkError","allowedHeaders","preflightDone","Constructor","protoProps","staticProps","userHeaders","companionHeaders","serverHeaders","defaultHeaders","_getPostResponseFunc","skip","_extends2","companion","_getUrl","_json","errMsg","statusText","json","requestId","preflight","headerName","trim","preflightAndHeaders","skipPostResponse","credentials","companionCookiesRule","delete","Accept"],"mappings":"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","file":"static/js/32.a6c6f99d.chunk.js","sourcesContent":["var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    fill: \"#0097DC\",\n    width: \"66\",\n    height: \"55\",\n    viewBox: \"0 0 66 55\"\n  }, h(\"path\", {\n    d: \"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z\",\n    fillRule: \"evenodd\"\n  }));\n};","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar NetworkError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(NetworkError, _Error);\n\n  function NetworkError(error, xhr) {\n    var _this;\n\n    if (xhr === void 0) {\n      xhr = null;\n    }\n\n    _this = _Error.call(this, \"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.\\n\\nSource error: [\" + error + \"]\") || this;\n    _this.isNetworkError = true;\n    _this.request = xhr;\n    return _this;\n  }\n\n  return NetworkError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nmodule.exports = NetworkError;","var _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar _require2 = require('@uppy/core'),\n    Plugin = _require2.Plugin;\n\nvar Translator = require('@uppy/utils/lib/Translator');\n\nvar getFileTypeExtension = require('@uppy/utils/lib/getFileTypeExtension');\n\nvar mimeTypes = require('@uppy/utils/lib/mimeTypes');\n\nvar canvasToBlob = require('@uppy/utils/lib/canvasToBlob');\n\nvar supportsMediaRecorder = require('./supportsMediaRecorder');\n\nvar CameraIcon = require('./CameraIcon');\n\nvar CameraScreen = require('./CameraScreen');\n\nvar PermissionsScreen = require('./PermissionsScreen');\n/**\n * Normalize a MIME type or file extension into a MIME type.\n *\n * @param {string} fileType - MIME type or a file extension prefixed with `.`.\n * @returns {string|undefined} The MIME type or `undefined` if the fileType is an extension and is not known.\n */\n\n\nfunction toMimeType(fileType) {\n  if (fileType[0] === '.') {\n    return mimeTypes[fileType.slice(1)];\n  }\n\n  return fileType;\n}\n/**\n * Is this MIME type a video?\n *\n * @param {string} mimeType - MIME type.\n * @returns {boolean}\n */\n\n\nfunction isVideoMimeType(mimeType) {\n  return /^video\\/[^*]+$/.test(mimeType);\n}\n/**\n * Is this MIME type an image?\n *\n * @param {string} mimeType - MIME type.\n * @returns {boolean}\n */\n\n\nfunction isImageMimeType(mimeType) {\n  return /^image\\/[^*]+$/.test(mimeType);\n}\n/**\n * Setup getUserMedia, with polyfill for older browsers\n * Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n */\n\n\nfunction getMediaDevices() {\n  // eslint-disable-next-line compat/compat\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // eslint-disable-next-line compat/compat\n    return navigator.mediaDevices;\n  }\n\n  var _getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\n  if (!_getUserMedia) {\n    return null;\n  }\n\n  return {\n    getUserMedia: function getUserMedia(opts) {\n      return new Promise(function (resolve, reject) {\n        _getUserMedia.call(navigator, opts, resolve, reject);\n      });\n    }\n  };\n}\n/**\n * Webcam\n */\n\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(Webcam, _Plugin);\n\n  // eslint-disable-next-line global-require\n  function Webcam(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.mediaDevices = getMediaDevices();\n    _this.supportsUserMedia = !!_this.mediaDevices; // eslint-disable-next-line no-restricted-globals\n\n    _this.protocol = location.protocol.match(/https/i) ? 'https' : 'http';\n    _this.id = _this.opts.id || 'Webcam';\n    _this.title = _this.opts.title || 'Camera';\n    _this.type = 'acquirer';\n    _this.capturedMediaFile = null;\n\n    _this.icon = function () {\n      return h(\"svg\", {\n        \"aria-hidden\": \"true\",\n        focusable: \"false\",\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      }, h(\"g\", {\n        fill: \"none\",\n        fillRule: \"evenodd\"\n      }, h(\"rect\", {\n        className: \"uppy-ProviderIconBg\",\n        fill: \"#03BFEF\",\n        width: \"32\",\n        height: \"32\",\n        rx: \"16\"\n      }), h(\"path\", {\n        d: \"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z\",\n        fill: \"#FFF\",\n        fillRule: \"nonzero\"\n      })));\n    };\n\n    _this.defaultLocale = {\n      strings: {\n        smile: 'Smile!',\n        takePicture: 'Take a picture',\n        startRecording: 'Begin video recording',\n        stopRecording: 'Stop video recording',\n        allowAccessTitle: 'Please allow access to your camera',\n        allowAccessDescription: 'In order to take pictures or record video with your camera, please allow camera access for this site.',\n        noCameraTitle: 'Camera Not Available',\n        noCameraDescription: 'In order to take pictures or record video, please connect a camera device',\n        recordingStoppedMaxSize: 'Recording stopped because the file size is about to exceed the limit',\n        recordingLength: 'Recording length %{recording_length}',\n        submitRecordedFile: 'Submit recorded file',\n        discardRecordedFile: 'Discard recorded file'\n      }\n    }; // set default options\n\n    var defaultOptions = {\n      onBeforeSnapshot: function onBeforeSnapshot() {\n        return Promise.resolve();\n      },\n      countdown: false,\n      modes: ['video-audio', 'video-only', 'audio-only', 'picture'],\n      mirror: true,\n      showVideoSourceDropdown: false,\n      facingMode: 'user',\n      preferredImageMimeType: null,\n      preferredVideoMimeType: null,\n      showRecordingLength: false\n    };\n    _this.opts = _extends({}, defaultOptions, opts);\n\n    _this.i18nInit();\n\n    _this.install = _this.install.bind(_assertThisInitialized(_this));\n    _this.setPluginState = _this.setPluginState.bind(_assertThisInitialized(_this));\n    _this.render = _this.render.bind(_assertThisInitialized(_this)); // Camera controls\n\n    _this.start = _this.start.bind(_assertThisInitialized(_this));\n    _this.stop = _this.stop.bind(_assertThisInitialized(_this));\n    _this.takeSnapshot = _this.takeSnapshot.bind(_assertThisInitialized(_this));\n    _this.startRecording = _this.startRecording.bind(_assertThisInitialized(_this));\n    _this.stopRecording = _this.stopRecording.bind(_assertThisInitialized(_this));\n    _this.discardRecordedVideo = _this.discardRecordedVideo.bind(_assertThisInitialized(_this));\n    _this.submit = _this.submit.bind(_assertThisInitialized(_this));\n    _this.oneTwoThreeSmile = _this.oneTwoThreeSmile.bind(_assertThisInitialized(_this));\n    _this.focus = _this.focus.bind(_assertThisInitialized(_this));\n    _this.changeVideoSource = _this.changeVideoSource.bind(_assertThisInitialized(_this));\n    _this.webcamActive = false;\n\n    if (_this.opts.countdown) {\n      _this.opts.onBeforeSnapshot = _this.oneTwoThreeSmile;\n    }\n\n    _this.setPluginState({\n      hasCamera: false,\n      cameraReady: false,\n      cameraError: null,\n      recordingLengthSeconds: 0,\n      videoSources: [],\n      currentDeviceId: null\n    });\n\n    return _this;\n  }\n\n  var _proto = Webcam.prototype;\n\n  _proto.setOptions = function setOptions(newOpts) {\n    _Plugin.prototype.setOptions.call(this, _extends({}, newOpts, {\n      videoConstraints: _extends({}, this.opts.videoConstraints, newOpts == null ? void 0 : newOpts.videoConstraints)\n    }));\n\n    this.i18nInit();\n  };\n\n  _proto.i18nInit = function i18nInit() {\n    this.translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale]);\n    this.i18n = this.translator.translate.bind(this.translator);\n    this.i18nArray = this.translator.translateArray.bind(this.translator);\n    this.setPluginState(); // so that UI re-renders and we see the updated locale\n  };\n\n  _proto.hasCameraCheck = function hasCameraCheck() {\n    if (!this.mediaDevices) {\n      return Promise.resolve(false);\n    }\n\n    return this.mediaDevices.enumerateDevices().then(function (devices) {\n      return devices.some(function (device) {\n        return device.kind === 'videoinput';\n      });\n    });\n  };\n\n  _proto.isAudioOnly = function isAudioOnly() {\n    return this.opts.modes.length === 1 && this.opts.modes[0] === 'audio-only';\n  };\n\n  _proto.getConstraints = function getConstraints(deviceId) {\n    var _this$opts$videoConst;\n\n    if (deviceId === void 0) {\n      deviceId = null;\n    }\n\n    var acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('audio-only') !== -1;\n    var acceptsVideo = !this.isAudioOnly() && (this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('video-only') !== -1 || this.opts.modes.indexOf('picture') !== -1);\n\n    var videoConstraints = _extends({}, (_this$opts$videoConst = this.opts.videoConstraints) != null ? _this$opts$videoConst : {\n      facingMode: this.opts.facingMode\n    }, deviceId ? {\n      deviceId: deviceId,\n      facingMode: null\n    } : {});\n\n    return {\n      audio: acceptsAudio,\n      video: acceptsVideo ? videoConstraints : false\n    };\n  } // eslint-disable-next-line consistent-return\n  ;\n\n  _proto.start = function start(options) {\n    var _this2 = this;\n\n    if (options === void 0) {\n      options = null;\n    }\n\n    if (!this.supportsUserMedia) {\n      return Promise.reject(new Error('Webcam access not supported'));\n    }\n\n    this.webcamActive = true;\n    this.opts.mirror = true;\n    var constraints = this.getConstraints(options && options.deviceId ? options.deviceId : null);\n    this.hasCameraCheck().then(function (hasCamera) {\n      _this2.setPluginState({\n        hasCamera: hasCamera\n      }); // ask user for access to their camera\n\n\n      return _this2.mediaDevices.getUserMedia(constraints).then(function (stream) {\n        _this2.stream = stream;\n        var currentDeviceId = null;\n        var tracks = _this2.isAudioOnly() ? stream.getAudioTracks() : stream.getVideoTracks();\n\n        if (!options || !options.deviceId) {\n          currentDeviceId = tracks[0].getSettings().deviceId;\n        } else {\n          tracks.forEach(function (track) {\n            if (track.getSettings().deviceId === options.deviceId) {\n              currentDeviceId = track.getSettings().deviceId;\n            }\n          });\n        } // Update the sources now, so we can access the names.\n\n\n        _this2.updateVideoSources();\n\n        _this2.setPluginState({\n          currentDeviceId: currentDeviceId,\n          cameraReady: true\n        });\n      }).catch(function (err) {\n        _this2.setPluginState({\n          cameraReady: false,\n          cameraError: err\n        });\n\n        _this2.uppy.info(err.message, 'error');\n      });\n    });\n  }\n  /**\n   * @returns {object}\n   */\n  ;\n\n  _proto.getMediaRecorderOptions = function getMediaRecorderOptions() {\n    var options = {}; // Try to use the `opts.preferredVideoMimeType` or one of the `allowedFileTypes` for the recording.\n    // If the browser doesn't support it, we'll fall back to the browser default instead.\n    // Safari doesn't have the `isTypeSupported` API.\n\n    if (MediaRecorder.isTypeSupported) {\n      var restrictions = this.uppy.opts.restrictions;\n      var preferredVideoMimeTypes = [];\n\n      if (this.opts.preferredVideoMimeType) {\n        preferredVideoMimeTypes = [this.opts.preferredVideoMimeType];\n      } else if (restrictions.allowedFileTypes) {\n        preferredVideoMimeTypes = restrictions.allowedFileTypes.map(toMimeType).filter(isVideoMimeType);\n      }\n\n      var filterSupportedTypes = function filterSupportedTypes(candidateType) {\n        return MediaRecorder.isTypeSupported(candidateType) && getFileTypeExtension(candidateType);\n      };\n\n      var acceptableMimeTypes = preferredVideoMimeTypes.filter(filterSupportedTypes);\n\n      if (acceptableMimeTypes.length > 0) {\n        // eslint-disable-next-line prefer-destructuring\n        options.mimeType = acceptableMimeTypes[0];\n      }\n    }\n\n    return options;\n  };\n\n  _proto.startRecording = function startRecording() {\n    var _this3 = this;\n\n    // only used if supportsMediaRecorder() returned true\n    // eslint-disable-next-line compat/compat\n    this.recorder = new MediaRecorder(this.stream, this.getMediaRecorderOptions());\n    this.recordingChunks = [];\n    var stoppingBecauseOfMaxSize = false;\n    this.recorder.addEventListener('dataavailable', function (event) {\n      _this3.recordingChunks.push(event.data);\n\n      var restrictions = _this3.uppy.opts.restrictions;\n\n      if (_this3.recordingChunks.length > 1 && restrictions.maxFileSize != null && !stoppingBecauseOfMaxSize) {\n        var totalSize = _this3.recordingChunks.reduce(function (acc, chunk) {\n          return acc + chunk.size;\n        }, 0); // Exclude the initial chunk from the average size calculation because it is likely to be a very small outlier\n\n\n        var averageChunkSize = (totalSize - _this3.recordingChunks[0].size) / (_this3.recordingChunks.length - 1);\n        var expectedEndChunkSize = averageChunkSize * 3;\n        var maxSize = Math.max(0, restrictions.maxFileSize - expectedEndChunkSize);\n\n        if (totalSize > maxSize) {\n          stoppingBecauseOfMaxSize = true;\n\n          _this3.uppy.info(_this3.i18n('recordingStoppedMaxSize'), 'warning', 4000);\n\n          _this3.stopRecording();\n        }\n      }\n    }); // use a \"time slice\" of 500ms: ondataavailable will be called each 500ms\n    // smaller time slices mean we can more accurately check the max file size restriction\n\n    this.recorder.start(500);\n\n    if (this.opts.showRecordingLength) {\n      // Start the recordingLengthTimer if we are showing the recording length.\n      this.recordingLengthTimer = setInterval(function () {\n        var currentRecordingLength = _this3.getPluginState().recordingLengthSeconds;\n\n        _this3.setPluginState({\n          recordingLengthSeconds: currentRecordingLength + 1\n        });\n      }, 1000);\n    }\n\n    this.setPluginState({\n      isRecording: true\n    });\n  };\n\n  _proto.stopRecording = function stopRecording() {\n    var _this4 = this;\n\n    var stopped = new Promise(function (resolve) {\n      _this4.recorder.addEventListener('stop', function () {\n        resolve();\n      });\n\n      _this4.recorder.stop();\n\n      if (_this4.opts.showRecordingLength) {\n        // Stop the recordingLengthTimer if we are showing the recording length.\n        clearInterval(_this4.recordingLengthTimer);\n\n        _this4.setPluginState({\n          recordingLengthSeconds: 0\n        });\n      }\n    });\n    return stopped.then(function () {\n      _this4.setPluginState({\n        isRecording: false\n      });\n\n      return _this4.getVideo();\n    }).then(function (file) {\n      try {\n        _this4.capturedMediaFile = file; // create object url for capture result preview\n\n        _this4.setPluginState({\n          // eslint-disable-next-line compat/compat\n          recordedVideo: URL.createObjectURL(file.data)\n        });\n\n        _this4.opts.mirror = false;\n      } catch (err) {\n        // Logging the error, exept restrictions, which is handled in Core\n        if (!err.isRestriction) {\n          _this4.uppy.log(err);\n        }\n      }\n    }).then(function () {\n      _this4.recordingChunks = null;\n      _this4.recorder = null;\n    }, function (error) {\n      _this4.recordingChunks = null;\n      _this4.recorder = null;\n      throw error;\n    });\n  };\n\n  _proto.discardRecordedVideo = function discardRecordedVideo() {\n    this.setPluginState({\n      recordedVideo: null\n    });\n    this.opts.mirror = true;\n    this.capturedMediaFile = null;\n  };\n\n  _proto.submit = function submit() {\n    try {\n      if (this.capturedMediaFile) {\n        this.uppy.addFile(this.capturedMediaFile);\n      }\n    } catch (err) {\n      // Logging the error, exept restrictions, which is handled in Core\n      if (!err.isRestriction) {\n        this.uppy.log(err, 'error');\n      }\n    }\n  };\n\n  _proto.stop = function stop() {\n    if (this.stream) {\n      this.stream.getAudioTracks().forEach(function (track) {\n        track.stop();\n      });\n      this.stream.getVideoTracks().forEach(function (track) {\n        track.stop();\n      });\n    }\n\n    this.webcamActive = false;\n    this.stream = null;\n    this.setPluginState({\n      recordedVideo: null\n    });\n  };\n\n  _proto.getVideoElement = function getVideoElement() {\n    return this.el.querySelector('.uppy-Webcam-video');\n  };\n\n  _proto.oneTwoThreeSmile = function oneTwoThreeSmile() {\n    var _this5 = this;\n\n    return new Promise(function (resolve, reject) {\n      var count = _this5.opts.countdown; // eslint-disable-next-line consistent-return\n\n      var countDown = setInterval(function () {\n        if (!_this5.webcamActive) {\n          clearInterval(countDown);\n          _this5.captureInProgress = false;\n          return reject(new Error('Webcam is not active'));\n        }\n\n        if (count > 0) {\n          _this5.uppy.info(count + \"...\", 'warning', 800);\n\n          count--;\n        } else {\n          clearInterval(countDown);\n\n          _this5.uppy.info(_this5.i18n('smile'), 'success', 1500);\n\n          setTimeout(function () {\n            return resolve();\n          }, 1500);\n        }\n      }, 1000);\n    });\n  };\n\n  _proto.takeSnapshot = function takeSnapshot() {\n    var _this6 = this;\n\n    if (this.captureInProgress) return;\n    this.captureInProgress = true;\n    this.opts.onBeforeSnapshot().catch(function (err) {\n      var message = typeof err === 'object' ? err.message : err;\n\n      _this6.uppy.info(message, 'error', 5000);\n\n      return Promise.reject(new Error(\"onBeforeSnapshot: \" + message));\n    }).then(function () {\n      return _this6.getImage();\n    }).then(function (tagFile) {\n      _this6.captureInProgress = false;\n\n      try {\n        _this6.uppy.addFile(tagFile);\n      } catch (err) {\n        // Logging the error, except restrictions, which is handled in Core\n        if (!err.isRestriction) {\n          _this6.uppy.log(err);\n        }\n      }\n    }, function (error) {\n      _this6.captureInProgress = false;\n      throw error;\n    });\n  };\n\n  _proto.getImage = function getImage() {\n    var _this7 = this;\n\n    var video = this.getVideoElement();\n\n    if (!video) {\n      return Promise.reject(new Error('No video element found, likely due to the Webcam tab being closed.'));\n    }\n\n    var width = video.videoWidth;\n    var height = video.videoHeight;\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0);\n    var restrictions = this.uppy.opts.restrictions;\n    var preferredImageMimeTypes = [];\n\n    if (this.opts.preferredImageMimeType) {\n      preferredImageMimeTypes = [this.opts.preferredImageMimeType];\n    } else if (restrictions.allowedFileTypes) {\n      preferredImageMimeTypes = restrictions.allowedFileTypes.map(toMimeType).filter(isImageMimeType);\n    }\n\n    var mimeType = preferredImageMimeTypes[0] || 'image/jpeg';\n    var ext = getFileTypeExtension(mimeType) || 'jpg';\n    var name = \"cam-\" + Date.now() + \".\" + ext;\n    return canvasToBlob(canvas, mimeType).then(function (blob) {\n      return {\n        source: _this7.id,\n        name: name,\n        data: new Blob([blob], {\n          type: mimeType\n        }),\n        type: mimeType\n      };\n    });\n  };\n\n  _proto.getVideo = function getVideo() {\n    // Sometimes in iOS Safari, Blobs (especially the first Blob in the recordingChunks Array)\n    // have empty 'type' attributes (e.g. '') so we need to find a Blob that has a defined 'type'\n    // attribute in order to determine the correct MIME type.\n    var mimeType = this.recordingChunks.find(function (blob) {\n      var _blob$type;\n\n      return ((_blob$type = blob.type) == null ? void 0 : _blob$type.length) > 0;\n    }).type;\n    var fileExtension = getFileTypeExtension(mimeType);\n\n    if (!fileExtension) {\n      return Promise.reject(new Error(\"Could not retrieve recording: Unsupported media type \\\"\" + mimeType + \"\\\"\"));\n    }\n\n    var name = \"webcam-\" + Date.now() + \".\" + fileExtension;\n    var blob = new Blob(this.recordingChunks, {\n      type: mimeType\n    });\n    var file = {\n      source: this.id,\n      name: name,\n      data: new Blob([blob], {\n        type: mimeType\n      }),\n      type: mimeType\n    };\n    return Promise.resolve(file);\n  };\n\n  _proto.focus = function focus() {\n    var _this8 = this;\n\n    if (!this.opts.countdown) return;\n    setTimeout(function () {\n      _this8.uppy.info(_this8.i18n('smile'), 'success', 1500);\n    }, 1000);\n  };\n\n  _proto.changeVideoSource = function changeVideoSource(deviceId) {\n    this.stop();\n    this.start({\n      deviceId: deviceId\n    });\n  };\n\n  _proto.updateVideoSources = function updateVideoSources() {\n    var _this9 = this;\n\n    this.mediaDevices.enumerateDevices().then(function (devices) {\n      _this9.setPluginState({\n        videoSources: devices.filter(function (device) {\n          return device.kind === 'videoinput';\n        })\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    if (!this.webcamActive) {\n      this.start();\n    }\n\n    var webcamState = this.getPluginState();\n\n    if (!webcamState.cameraReady || !webcamState.hasCamera) {\n      return h(PermissionsScreen, {\n        icon: CameraIcon,\n        i18n: this.i18n,\n        hasCamera: webcamState.hasCamera\n      });\n    }\n\n    return h(CameraScreen // eslint-disable-next-line react/jsx-props-no-spreading\n    , _extends({}, webcamState, {\n      onChangeVideoSource: this.changeVideoSource,\n      onSnapshot: this.takeSnapshot,\n      onStartRecording: this.startRecording,\n      onStopRecording: this.stopRecording,\n      onDiscardRecordedVideo: this.discardRecordedVideo,\n      onSubmit: this.submit,\n      onFocus: this.focus,\n      onStop: this.stop,\n      i18n: this.i18n,\n      modes: this.opts.modes,\n      showRecordingLength: this.opts.showRecordingLength,\n      showVideoSourceDropdown: this.opts.showVideoSourceDropdown,\n      supportsRecording: supportsMediaRecorder(),\n      recording: webcamState.isRecording,\n      mirror: this.opts.mirror,\n      src: this.stream\n    }));\n  };\n\n  _proto.install = function install() {\n    var _this10 = this;\n\n    this.setPluginState({\n      cameraReady: false,\n      recordingLengthSeconds: 0\n    });\n    var target = this.opts.target;\n\n    if (target) {\n      this.mount(target, this);\n    }\n\n    if (this.mediaDevices) {\n      this.updateVideoSources();\n\n      this.mediaDevices.ondevicechange = function () {\n        _this10.updateVideoSources();\n\n        if (_this10.stream) {\n          var restartStream = true;\n\n          var _this10$getPluginStat = _this10.getPluginState(),\n              videoSources = _this10$getPluginStat.videoSources,\n              currentDeviceId = _this10$getPluginStat.currentDeviceId;\n\n          videoSources.forEach(function (videoSource) {\n            if (currentDeviceId === videoSource.deviceId) {\n              restartStream = false;\n            }\n          });\n\n          if (restartStream) {\n            _this10.stop();\n\n            _this10.start();\n          }\n        }\n      };\n    }\n  };\n\n  _proto.uninstall = function uninstall() {\n    if (this.stream) {\n      this.stop();\n    }\n\n    this.unmount();\n  };\n\n  return Webcam;\n}(Plugin), _class.VERSION = \"1.8.13\", _temp);","// TODO Check which types are actually supported in browsers. Chrome likes webm\n// from my testing, but we may need more.\n// We could use a library but they tend to contain dozens of KBs of mappings,\n// most of which will go unused, so not sure if that's worth it.\nvar mimeToExtensions = {\n  'audio/mp3': 'mp3',\n  'audio/mp4': 'mp4',\n  'audio/ogg': 'ogg',\n  'audio/webm': 'webm',\n  'image/gif': 'gif',\n  'image/heic': 'heic',\n  'image/heif': 'heif',\n  'image/jpeg': 'jpg',\n  'image/png': 'png',\n  'image/svg+xml': 'svg',\n  'video/mp4': 'mp4',\n  'video/ogg': 'ogv',\n  'video/quicktime': 'mov',\n  'video/webm': 'webm',\n  'video/x-matroska': 'mkv',\n  'video/x-msvideo': 'avi'\n};\n\nmodule.exports = function getFileTypeExtension(mimeType) {\n  // Remove the ; bit in 'video/x-matroska;codecs=avc1'\n  mimeType = mimeType.replace(/;.*$/, '');\n  return mimeToExtensions[mimeType] || null;\n};","var dataURItoBlob = require('./dataURItoBlob');\n/**\n * Save a <canvas> element's content to a Blob object.\n *\n * @param {HTMLCanvasElement} canvas\n * @returns {Promise}\n */\n\n\nmodule.exports = function canvasToBlob(canvas, type, quality) {\n  if (canvas.toBlob) {\n    return new Promise(function (resolve) {\n      canvas.toBlob(resolve, type, quality);\n    });\n  }\n\n  return Promise.resolve().then(function () {\n    return dataURItoBlob(canvas.toDataURL(type, quality), {});\n  });\n};","module.exports = function supportsMediaRecorder() {\n  /* eslint-disable compat/compat */\n  return typeof MediaRecorder === 'function' && !!MediaRecorder.prototype && typeof MediaRecorder.prototype.start === 'function';\n  /* eslint-enable compat/compat */\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/* eslint-disable jsx-a11y/media-has-caption */\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar SnapshotButton = require('./SnapshotButton');\n\nvar RecordButton = require('./RecordButton');\n\nvar RecordingLength = require('./RecordingLength');\n\nvar VideoSourceSelect = require('./VideoSourceSelect');\n\nvar SubmitButton = require('./SubmitButton');\n\nvar DiscardButton = require('./DiscardButton');\n\nfunction isModeAvailable(modes, mode) {\n  return modes.indexOf(mode) !== -1;\n}\n\nvar CameraScreen = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(CameraScreen, _Component);\n\n  function CameraScreen() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = CameraScreen.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var onFocus = this.props.onFocus;\n    onFocus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var onStop = this.props.onStop;\n    onStop();\n  };\n\n  _proto.render = function render() {\n    var _this = this;\n\n    var _this$props = this.props,\n        src = _this$props.src,\n        recordedVideo = _this$props.recordedVideo,\n        recording = _this$props.recording,\n        modes = _this$props.modes,\n        supportsRecording = _this$props.supportsRecording,\n        videoSources = _this$props.videoSources,\n        showVideoSourceDropdown = _this$props.showVideoSourceDropdown,\n        showRecordingLength = _this$props.showRecordingLength,\n        onSubmit = _this$props.onSubmit,\n        i18n = _this$props.i18n,\n        mirror = _this$props.mirror,\n        onSnapshot = _this$props.onSnapshot,\n        onStartRecording = _this$props.onStartRecording,\n        onStopRecording = _this$props.onStopRecording,\n        onDiscardRecordedVideo = _this$props.onDiscardRecordedVideo,\n        recordingLengthSeconds = _this$props.recordingLengthSeconds;\n    var hasRecordedVideo = !!recordedVideo;\n    var shouldShowRecordButton = !hasRecordedVideo && supportsRecording && (isModeAvailable(modes, 'video-only') || isModeAvailable(modes, 'audio-only') || isModeAvailable(modes, 'video-audio'));\n    var shouldShowSnapshotButton = !hasRecordedVideo && isModeAvailable(modes, 'picture');\n    var shouldShowRecordingLength = supportsRecording && showRecordingLength;\n    var shouldShowVideoSourceDropdown = showVideoSourceDropdown && videoSources && videoSources.length > 1;\n    var videoProps = {\n      playsinline: true\n    };\n\n    if (recordedVideo) {\n      videoProps.muted = false;\n      videoProps.controls = true;\n      videoProps.src = recordedVideo; // reset srcObject in dom. If not resetted, stream sticks in element\n\n      if (this.videoElement) {\n        this.videoElement.srcObject = undefined;\n      }\n    } else {\n      videoProps.muted = true;\n      videoProps.autoplay = true;\n      videoProps.srcObject = src;\n    }\n\n    return h(\"div\", {\n      className: \"uppy uppy-Webcam-container\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoContainer\"\n    }, h(\"video\", _extends({\n      /* eslint-disable-next-line no-return-assign */\n      ref: function ref(videoElement) {\n        return _this.videoElement = videoElement;\n      },\n      className: \"uppy-Webcam-video  \" + (mirror ? 'uppy-Webcam-video--mirrored' : '')\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n\n    }, videoProps))), h(\"div\", {\n      className: \"uppy-Webcam-footer\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoSourceContainer\"\n    }, shouldShowVideoSourceDropdown ? VideoSourceSelect(this.props) : null), h(\"div\", {\n      className: \"uppy-Webcam-buttonContainer\"\n    }, shouldShowSnapshotButton && h(SnapshotButton, {\n      onSnapshot: onSnapshot,\n      i18n: i18n\n    }), shouldShowRecordButton && h(RecordButton, {\n      recording: recording,\n      onStartRecording: onStartRecording,\n      onStopRecording: onStopRecording,\n      i18n: i18n\n    }), hasRecordedVideo && h(SubmitButton, {\n      onSubmit: onSubmit,\n      i18n: i18n\n    }), hasRecordedVideo && h(DiscardButton, {\n      onDiscard: onDiscardRecordedVideo,\n      i18n: i18n\n    })), shouldShowRecordingLength && h(\"div\", {\n      className: \"uppy-Webcam-recordingLength\"\n    }, h(RecordingLength, {\n      recordingLengthSeconds: recordingLengthSeconds,\n      i18n: i18n\n    }))));\n  };\n\n  return CameraScreen;\n}(Component);\n\nmodule.exports = CameraScreen;","var _require = require('preact'),\n    h = _require.h;\n\nvar CameraIcon = require('./CameraIcon');\n\nmodule.exports = function (_ref) {\n  var onSnapshot = _ref.onSnapshot,\n      i18n = _ref.i18n;\n  return h(\"button\", {\n    className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture\",\n    type: \"button\",\n    title: i18n('takePicture'),\n    \"aria-label\": i18n('takePicture'),\n    onClick: onSnapshot,\n    \"data-uppy-super-focusable\": true\n  }, CameraIcon());\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function RecordButton(_ref) {\n  var recording = _ref.recording,\n      onStartRecording = _ref.onStartRecording,\n      onStopRecording = _ref.onStopRecording,\n      i18n = _ref.i18n;\n\n  if (recording) {\n    return h(\"button\", {\n      className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\",\n      type: \"button\",\n      title: i18n('stopRecording'),\n      \"aria-label\": i18n('stopRecording'),\n      onClick: onStopRecording,\n      \"data-uppy-super-focusable\": true\n    }, h(\"svg\", {\n      \"aria-hidden\": \"true\",\n      focusable: \"false\",\n      className: \"uppy-c-icon\",\n      width: \"100\",\n      height: \"100\",\n      viewBox: \"0 0 100 100\"\n    }, h(\"rect\", {\n      x: \"15\",\n      y: \"15\",\n      width: \"70\",\n      height: \"70\"\n    })));\n  }\n\n  return h(\"button\", {\n    className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\",\n    type: \"button\",\n    title: i18n('startRecording'),\n    \"aria-label\": i18n('startRecording'),\n    onClick: onStartRecording,\n    \"data-uppy-super-focusable\": true\n  }, h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    className: \"uppy-c-icon\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0 0 100 100\"\n  }, h(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: \"40\"\n  })));\n};","var _require = require('preact'),\n    h = _require.h;\n\nvar formatSeconds = require('./formatSeconds');\n\nmodule.exports = function RecordingLength(_ref) {\n  var recordingLengthSeconds = _ref.recordingLengthSeconds,\n      i18n = _ref.i18n;\n  var formattedRecordingLengthSeconds = formatSeconds(recordingLengthSeconds);\n  return h(\"span\", {\n    \"aria-label\": i18n('recordingLength', {\n      recording_length: formattedRecordingLengthSeconds\n    })\n  }, formattedRecordingLengthSeconds);\n};","/**\n * Takes an Integer value of seconds (e.g. 83) and converts it into a human-readable formatted string (e.g. '1:23').\n *\n * @param {Integer} seconds\n * @returns {string} the formatted seconds (e.g. '1:23' for 1 minute and 23 seconds)\n *\n */\nmodule.exports = function formatSeconds(seconds) {\n  return Math.floor(seconds / 60) + \":\" + String(seconds % 60).padStart(2, 0);\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (_ref) {\n  var currentDeviceId = _ref.currentDeviceId,\n      videoSources = _ref.videoSources,\n      onChangeVideoSource = _ref.onChangeVideoSource;\n  return h(\"div\", {\n    className: \"uppy-Webcam-videoSource\"\n  }, h(\"select\", {\n    className: \"uppy-u-reset uppy-Webcam-videoSource-select\",\n    onChange: function onChange(event) {\n      onChangeVideoSource(event.target.value);\n    }\n  }, videoSources.map(function (videoSource) {\n    return h(\"option\", {\n      key: videoSource.deviceId,\n      value: videoSource.deviceId,\n      selected: videoSource.deviceId === currentDeviceId\n    }, videoSource.label);\n  })));\n};","var _require = require('preact'),\n    h = _require.h;\n\nfunction SubmitButton(_ref) {\n  var onSubmit = _ref.onSubmit,\n      i18n = _ref.i18n;\n  return h(\"button\", {\n    className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit\",\n    type: \"button\",\n    title: i18n('submitRecordedFile'),\n    \"aria-label\": i18n('submitRecordedFile'),\n    onClick: onSubmit,\n    \"data-uppy-super-focusable\": true\n  }, h(\"svg\", {\n    width: \"12\",\n    height: \"9\",\n    viewBox: \"0 0 12 9\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    className: \"uppy-c-icon\"\n  }, h(\"path\", {\n    fill: \"#fff\",\n    fillRule: \"nonzero\",\n    d: \"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z\"\n  })));\n}\n\nmodule.exports = SubmitButton;","var _require = require('preact'),\n    h = _require.h;\n\nfunction DiscardButton(_ref) {\n  var onDiscard = _ref.onDiscard,\n      i18n = _ref.i18n;\n  return h(\"button\", {\n    className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\",\n    type: \"button\",\n    title: i18n('discardRecordedFile'),\n    \"aria-label\": i18n('discardRecordedFile'),\n    onClick: onDiscard,\n    \"data-uppy-super-focusable\": true\n  }, h(\"svg\", {\n    width: \"13\",\n    height: \"13\",\n    viewBox: \"0 0 13 13\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    className: \"uppy-c-icon\"\n  }, h(\"g\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\"\n  }, h(\"path\", {\n    d: \"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z\"\n  }), h(\"path\", {\n    d: \"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z\"\n  }))));\n}\n\nmodule.exports = DiscardButton;","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"div\", {\n    className: \"uppy-Webcam-permissons\"\n  }, h(\"div\", {\n    className: \"uppy-Webcam-permissonsIcon\"\n  }, props.icon()), h(\"h1\", {\n    className: \"uppy-Webcam-title\"\n  }, props.hasCamera ? props.i18n('allowAccessTitle') : props.i18n('noCameraTitle')), h(\"p\", null, props.hasCamera ? props.i18n('allowAccessDescription') : props.i18n('noCameraDescription')));\n};","var _class, _temp;\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar _require = require('@uppy/core'),\n    Plugin = _require.Plugin;\n\nvar cuid = require('cuid');\n\nvar Translator = require('@uppy/utils/lib/Translator');\n\nvar _require2 = require('@uppy/companion-client'),\n    Provider = _require2.Provider,\n    RequestClient = _require2.RequestClient,\n    Socket = _require2.Socket;\n\nvar emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress');\n\nvar getSocketHost = require('@uppy/utils/lib/getSocketHost');\n\nvar settle = require('@uppy/utils/lib/settle');\n\nvar EventTracker = require('@uppy/utils/lib/EventTracker');\n\nvar ProgressTimeout = require('@uppy/utils/lib/ProgressTimeout');\n\nvar RateLimitedQueue = require('@uppy/utils/lib/RateLimitedQueue');\n\nvar NetworkError = require('@uppy/utils/lib/NetworkError');\n\nvar isNetworkError = require('@uppy/utils/lib/isNetworkError');\n\nfunction buildResponseError(xhr, error) {\n  // No error message\n  if (!error) error = new Error('Upload error'); // Got an error message string\n\n  if (typeof error === 'string') error = new Error(error); // Got something else\n\n  if (!(error instanceof Error)) {\n    error = _extends(new Error('Upload error'), {\n      data: error\n    });\n  }\n\n  if (isNetworkError(xhr)) {\n    error = new NetworkError(error, xhr);\n    return error;\n  }\n\n  error.request = xhr;\n  return error;\n}\n/**\n * Set `data.type` in the blob to `file.meta.type`,\n * because we might have detected a more accurate file type in Uppy\n * https://stackoverflow.com/a/50875615\n *\n * @param {object} file File object with `data`, `size` and `meta` properties\n * @returns {object} blob updated with the new `type` set from `file.meta.type`\n */\n\n\nfunction setTypeInBlob(file) {\n  var dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type);\n  return dataWithUpdatedType;\n}\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(XHRUpload, _Plugin);\n\n  function XHRUpload(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.type = 'uploader';\n    _this.id = _this.opts.id || 'XHRUpload';\n    _this.title = 'XHRUpload';\n    _this.defaultLocale = {\n      strings: {\n        timedOut: 'Upload stalled for %{seconds} seconds, aborting.'\n      }\n    }; // Default options\n\n    var defaultOptions = {\n      formData: true,\n      fieldName: 'files[]',\n      method: 'post',\n      metaFields: null,\n      responseUrlFieldName: 'url',\n      bundle: false,\n      headers: {},\n      timeout: 30 * 1000,\n      limit: 0,\n      withCredentials: false,\n      responseType: '',\n\n      /**\n       * @typedef respObj\n       * @property {string} responseText\n       * @property {number} status\n       * @property {string} statusText\n       * @property {object.<string, string>} headers\n       *\n       * @param {string} responseText the response body string\n       * @param {XMLHttpRequest | respObj} response the response object (XHR or similar)\n       */\n      getResponseData: function getResponseData(responseText, response) {\n        var parsedResponse = {};\n\n        try {\n          parsedResponse = JSON.parse(responseText);\n        } catch (err) {\n          console.log(err);\n        }\n\n        return parsedResponse;\n      },\n\n      /**\n       *\n       * @param {string} responseText the response body string\n       * @param {XMLHttpRequest | respObj} response the response object (XHR or similar)\n       */\n      getResponseError: function getResponseError(responseText, response) {\n        var error = new Error('Upload error');\n\n        if (isNetworkError(response)) {\n          error = new NetworkError(error, response);\n        }\n\n        return error;\n      },\n\n      /**\n       * Check if the response from the upload endpoint indicates that the upload was successful.\n       *\n       * @param {number} status the response status code\n       * @param {string} responseText the response body string\n       * @param {XMLHttpRequest | respObj} response the response object (XHR or similar)\n       */\n      validateStatus: function validateStatus(status, responseText, response) {\n        return status >= 200 && status < 300;\n      }\n    };\n    _this.opts = _extends({}, defaultOptions, opts);\n\n    _this.i18nInit();\n\n    _this.handleUpload = _this.handleUpload.bind(_assertThisInitialized(_this)); // Simultaneous upload limiting is shared across all uploads with this plugin.\n    // __queue is for internal Uppy use only!\n\n    if (_this.opts.__queue instanceof RateLimitedQueue) {\n      _this.requests = _this.opts.__queue;\n    } else {\n      _this.requests = new RateLimitedQueue(_this.opts.limit);\n    }\n\n    if (_this.opts.bundle && !_this.opts.formData) {\n      throw new Error('`opts.formData` must be true when `opts.bundle` is enabled.');\n    }\n\n    _this.uploaderEvents = Object.create(null);\n    return _this;\n  }\n\n  var _proto = XHRUpload.prototype;\n\n  _proto.setOptions = function setOptions(newOpts) {\n    _Plugin.prototype.setOptions.call(this, newOpts);\n\n    this.i18nInit();\n  };\n\n  _proto.i18nInit = function i18nInit() {\n    this.translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale]);\n    this.i18n = this.translator.translate.bind(this.translator);\n    this.setPluginState(); // so that UI re-renders and we see the updated locale\n  };\n\n  _proto.getOptions = function getOptions(file) {\n    var overrides = this.uppy.getState().xhrUpload;\n    var headers = this.opts.headers;\n\n    var opts = _extends({}, this.opts, overrides || {}, file.xhrUpload || {}, {\n      headers: {}\n    }); // Support for `headers` as a function, only in the XHRUpload settings.\n    // Options set by other plugins in Uppy state or on the files themselves are still merged in afterward.\n    //\n    // ```js\n    // headers: (file) => ({ expires: file.meta.expires })\n    // ```\n\n\n    if (typeof headers === 'function') {\n      opts.headers = headers(file);\n    } else {\n      _extends(opts.headers, this.opts.headers);\n    }\n\n    if (overrides) {\n      _extends(opts.headers, overrides.headers);\n    }\n\n    if (file.xhrUpload) {\n      _extends(opts.headers, file.xhrUpload.headers);\n    }\n\n    return opts;\n  };\n\n  _proto.addMetadata = function addMetadata(formData, meta, opts) {\n    var metaFields = Array.isArray(opts.metaFields) ? opts.metaFields // Send along all fields by default.\n    : Object.keys(meta);\n    metaFields.forEach(function (item) {\n      formData.append(item, meta[item]);\n    });\n  };\n\n  _proto.createFormDataUpload = function createFormDataUpload(file, opts) {\n    var formPost = new FormData();\n    this.addMetadata(formPost, file.meta, opts);\n    var dataWithUpdatedType = setTypeInBlob(file);\n\n    if (file.name) {\n      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name);\n    } else {\n      formPost.append(opts.fieldName, dataWithUpdatedType);\n    }\n\n    return formPost;\n  };\n\n  _proto.createBundledUpload = function createBundledUpload(files, opts) {\n    var _this2 = this;\n\n    var formPost = new FormData();\n\n    var _this$uppy$getState = this.uppy.getState(),\n        meta = _this$uppy$getState.meta;\n\n    this.addMetadata(formPost, meta, opts);\n    files.forEach(function (file) {\n      var opts = _this2.getOptions(file);\n\n      var dataWithUpdatedType = setTypeInBlob(file);\n\n      if (file.name) {\n        formPost.append(opts.fieldName, dataWithUpdatedType, file.name);\n      } else {\n        formPost.append(opts.fieldName, dataWithUpdatedType);\n      }\n    });\n    return formPost;\n  };\n\n  _proto.createBareUpload = function createBareUpload(file, opts) {\n    return file.data;\n  };\n\n  _proto.upload = function upload(file, current, total) {\n    var _this3 = this;\n\n    var opts = this.getOptions(file);\n    this.uppy.log(\"uploading \" + current + \" of \" + total);\n    return new Promise(function (resolve, reject) {\n      _this3.uppy.emit('upload-started', file);\n\n      var data = opts.formData ? _this3.createFormDataUpload(file, opts) : _this3.createBareUpload(file, opts);\n      var xhr = new XMLHttpRequest();\n      _this3.uploaderEvents[file.id] = new EventTracker(_this3.uppy);\n      var timer = new ProgressTimeout(opts.timeout, function () {\n        xhr.abort();\n        queuedRequest.done();\n        var error = new Error(_this3.i18n('timedOut', {\n          seconds: Math.ceil(opts.timeout / 1000)\n        }));\n\n        _this3.uppy.emit('upload-error', file, error);\n\n        reject(error);\n      });\n      var id = cuid();\n      xhr.upload.addEventListener('loadstart', function (ev) {\n        _this3.uppy.log(\"[XHRUpload] \" + id + \" started\");\n      });\n      xhr.upload.addEventListener('progress', function (ev) {\n        _this3.uppy.log(\"[XHRUpload] \" + id + \" progress: \" + ev.loaded + \" / \" + ev.total); // Begin checking for timeouts when progress starts, instead of loading,\n        // to avoid timing out requests on browser concurrency queue\n\n\n        timer.progress();\n\n        if (ev.lengthComputable) {\n          _this3.uppy.emit('upload-progress', file, {\n            uploader: _this3,\n            bytesUploaded: ev.loaded,\n            bytesTotal: ev.total\n          });\n        }\n      });\n      xhr.addEventListener('load', function (ev) {\n        _this3.uppy.log(\"[XHRUpload] \" + id + \" finished\");\n\n        timer.done();\n        queuedRequest.done();\n\n        if (_this3.uploaderEvents[file.id]) {\n          _this3.uploaderEvents[file.id].remove();\n\n          _this3.uploaderEvents[file.id] = null;\n        }\n\n        if (opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {\n          var _body = opts.getResponseData(xhr.responseText, xhr);\n\n          var uploadURL = _body[opts.responseUrlFieldName];\n          var uploadResp = {\n            status: ev.target.status,\n            body: _body,\n            uploadURL: uploadURL\n          };\n\n          _this3.uppy.emit('upload-success', file, uploadResp);\n\n          if (uploadURL) {\n            _this3.uppy.log(\"Download \" + file.name + \" from \" + uploadURL);\n          }\n\n          return resolve(file);\n        }\n\n        var body = opts.getResponseData(xhr.responseText, xhr);\n        var error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr));\n        var response = {\n          status: ev.target.status,\n          body: body\n        };\n\n        _this3.uppy.emit('upload-error', file, error, response);\n\n        return reject(error);\n      });\n      xhr.addEventListener('error', function (ev) {\n        _this3.uppy.log(\"[XHRUpload] \" + id + \" errored\");\n\n        timer.done();\n        queuedRequest.done();\n\n        if (_this3.uploaderEvents[file.id]) {\n          _this3.uploaderEvents[file.id].remove();\n\n          _this3.uploaderEvents[file.id] = null;\n        }\n\n        var error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr));\n\n        _this3.uppy.emit('upload-error', file, error);\n\n        return reject(error);\n      });\n      xhr.open(opts.method.toUpperCase(), opts.endpoint, true); // IE10 does not allow setting `withCredentials` and `responseType`\n      // before `open()` is called.\n\n      xhr.withCredentials = opts.withCredentials;\n\n      if (opts.responseType !== '') {\n        xhr.responseType = opts.responseType;\n      }\n\n      var queuedRequest = _this3.requests.run(function () {\n        // When using an authentication system like JWT, the bearer token goes as a header. This\n        // header needs to be fresh each time the token is refreshed so computing and setting the\n        // headers just before the upload starts enables this kind of authentication to work properly.\n        // Otherwise, half-way through the list of uploads the token could be stale and the upload would fail.\n        var currentOpts = _this3.getOptions(file);\n\n        Object.keys(currentOpts.headers).forEach(function (header) {\n          xhr.setRequestHeader(header, currentOpts.headers[header]);\n        });\n        xhr.send(data);\n        return function () {\n          timer.done();\n          xhr.abort();\n        };\n      });\n\n      _this3.onFileRemove(file.id, function () {\n        queuedRequest.abort();\n        reject(new Error('File removed'));\n      });\n\n      _this3.onCancelAll(file.id, function () {\n        queuedRequest.abort();\n        reject(new Error('Upload cancelled'));\n      });\n    });\n  };\n\n  _proto.uploadRemote = function uploadRemote(file, current, total) {\n    var _this4 = this;\n\n    var opts = this.getOptions(file);\n    return new Promise(function (resolve, reject) {\n      _this4.uppy.emit('upload-started', file);\n\n      var fields = {};\n      var metaFields = Array.isArray(opts.metaFields) ? opts.metaFields // Send along all fields by default.\n      : Object.keys(file.meta);\n      metaFields.forEach(function (name) {\n        fields[name] = file.meta[name];\n      });\n      var Client = file.remote.providerOptions.provider ? Provider : RequestClient;\n      var client = new Client(_this4.uppy, file.remote.providerOptions);\n      client.post(file.remote.url, _extends({}, file.remote.body, {\n        endpoint: opts.endpoint,\n        size: file.data.size,\n        fieldname: opts.fieldName,\n        metadata: fields,\n        httpMethod: opts.method,\n        useFormData: opts.formData,\n        headers: opts.headers\n      })).then(function (res) {\n        var token = res.token;\n        var host = getSocketHost(file.remote.companionUrl);\n        var socket = new Socket({\n          target: host + \"/api/\" + token,\n          autoOpen: false\n        });\n        _this4.uploaderEvents[file.id] = new EventTracker(_this4.uppy);\n\n        _this4.onFileRemove(file.id, function () {\n          socket.send('pause', {});\n          queuedRequest.abort();\n          resolve(\"upload \" + file.id + \" was removed\");\n        });\n\n        _this4.onCancelAll(file.id, function () {\n          socket.send('pause', {});\n          queuedRequest.abort();\n          resolve(\"upload \" + file.id + \" was canceled\");\n        });\n\n        _this4.onRetry(file.id, function () {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        });\n\n        _this4.onRetryAll(file.id, function () {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        });\n\n        socket.on('progress', function (progressData) {\n          return emitSocketProgress(_this4, progressData, file);\n        });\n        socket.on('success', function (data) {\n          var body = opts.getResponseData(data.response.responseText, data.response);\n          var uploadURL = body[opts.responseUrlFieldName];\n          var uploadResp = {\n            status: data.response.status,\n            body: body,\n            uploadURL: uploadURL\n          };\n\n          _this4.uppy.emit('upload-success', file, uploadResp);\n\n          queuedRequest.done();\n\n          if (_this4.uploaderEvents[file.id]) {\n            _this4.uploaderEvents[file.id].remove();\n\n            _this4.uploaderEvents[file.id] = null;\n          }\n\n          return resolve();\n        });\n        socket.on('error', function (errData) {\n          var resp = errData.response;\n          var error = resp ? opts.getResponseError(resp.responseText, resp) : _extends(new Error(errData.error.message), {\n            cause: errData.error\n          });\n\n          _this4.uppy.emit('upload-error', file, error);\n\n          queuedRequest.done();\n\n          if (_this4.uploaderEvents[file.id]) {\n            _this4.uploaderEvents[file.id].remove();\n\n            _this4.uploaderEvents[file.id] = null;\n          }\n\n          reject(error);\n        });\n\n        var queuedRequest = _this4.requests.run(function () {\n          socket.open();\n\n          if (file.isPaused) {\n            socket.send('pause', {});\n          }\n\n          return function () {\n            return socket.close();\n          };\n        });\n      }).catch(function (err) {\n        _this4.uppy.emit('upload-error', file, err);\n\n        reject(err);\n      });\n    });\n  };\n\n  _proto.uploadBundle = function uploadBundle(files) {\n    var _this5 = this;\n\n    return new Promise(function (resolve, reject) {\n      var endpoint = _this5.opts.endpoint;\n      var method = _this5.opts.method;\n\n      var optsFromState = _this5.uppy.getState().xhrUpload;\n\n      var formData = _this5.createBundledUpload(files, _extends({}, _this5.opts, optsFromState || {}));\n\n      var xhr = new XMLHttpRequest();\n      var timer = new ProgressTimeout(_this5.opts.timeout, function () {\n        xhr.abort();\n        var error = new Error(_this5.i18n('timedOut', {\n          seconds: Math.ceil(_this5.opts.timeout / 1000)\n        }));\n        emitError(error);\n        reject(error);\n      });\n\n      var emitError = function emitError(error) {\n        files.forEach(function (file) {\n          _this5.uppy.emit('upload-error', file, error);\n        });\n      };\n\n      xhr.upload.addEventListener('loadstart', function (ev) {\n        _this5.uppy.log('[XHRUpload] started uploading bundle');\n\n        timer.progress();\n      });\n      xhr.upload.addEventListener('progress', function (ev) {\n        timer.progress();\n        if (!ev.lengthComputable) return;\n        files.forEach(function (file) {\n          _this5.uppy.emit('upload-progress', file, {\n            uploader: _this5,\n            bytesUploaded: ev.loaded / ev.total * file.size,\n            bytesTotal: file.size\n          });\n        });\n      });\n      xhr.addEventListener('load', function (ev) {\n        timer.done();\n\n        if (_this5.opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {\n          var body = _this5.opts.getResponseData(xhr.responseText, xhr);\n\n          var uploadResp = {\n            status: ev.target.status,\n            body: body\n          };\n          files.forEach(function (file) {\n            _this5.uppy.emit('upload-success', file, uploadResp);\n          });\n          return resolve();\n        }\n\n        var error = _this5.opts.getResponseError(xhr.responseText, xhr) || new Error('Upload error');\n        error.request = xhr;\n        emitError(error);\n        return reject(error);\n      });\n      xhr.addEventListener('error', function (ev) {\n        timer.done();\n        var error = _this5.opts.getResponseError(xhr.responseText, xhr) || new Error('Upload error');\n        emitError(error);\n        return reject(error);\n      });\n\n      _this5.uppy.on('cancel-all', function () {\n        timer.done();\n        xhr.abort();\n      });\n\n      xhr.open(method.toUpperCase(), endpoint, true); // IE10 does not allow setting `withCredentials` and `responseType`\n      // before `open()` is called.\n\n      xhr.withCredentials = _this5.opts.withCredentials;\n\n      if (_this5.opts.responseType !== '') {\n        xhr.responseType = _this5.opts.responseType;\n      }\n\n      Object.keys(_this5.opts.headers).forEach(function (header) {\n        xhr.setRequestHeader(header, _this5.opts.headers[header]);\n      });\n      xhr.send(formData);\n      files.forEach(function (file) {\n        _this5.uppy.emit('upload-started', file);\n      });\n    });\n  };\n\n  _proto.uploadFiles = function uploadFiles(files) {\n    var _this6 = this;\n\n    var promises = files.map(function (file, i) {\n      var current = parseInt(i, 10) + 1;\n      var total = files.length;\n\n      if (file.error) {\n        return Promise.reject(new Error(file.error));\n      }\n\n      if (file.isRemote) {\n        return _this6.uploadRemote(file, current, total);\n      }\n\n      return _this6.upload(file, current, total);\n    });\n    return settle(promises);\n  };\n\n  _proto.onFileRemove = function onFileRemove(fileID, cb) {\n    this.uploaderEvents[fileID].on('file-removed', function (file) {\n      if (fileID === file.id) cb(file.id);\n    });\n  };\n\n  _proto.onRetry = function onRetry(fileID, cb) {\n    this.uploaderEvents[fileID].on('upload-retry', function (targetFileID) {\n      if (fileID === targetFileID) {\n        cb();\n      }\n    });\n  };\n\n  _proto.onRetryAll = function onRetryAll(fileID, cb) {\n    var _this7 = this;\n\n    this.uploaderEvents[fileID].on('retry-all', function (filesToRetry) {\n      if (!_this7.uppy.getFile(fileID)) return;\n      cb();\n    });\n  };\n\n  _proto.onCancelAll = function onCancelAll(fileID, cb) {\n    var _this8 = this;\n\n    this.uploaderEvents[fileID].on('cancel-all', function () {\n      if (!_this8.uppy.getFile(fileID)) return;\n      cb();\n    });\n  };\n\n  _proto.handleUpload = function handleUpload(fileIDs) {\n    var _this9 = this;\n\n    if (fileIDs.length === 0) {\n      this.uppy.log('[XHRUpload] No files to upload!');\n      return Promise.resolve();\n    } // no limit configured by the user, and no RateLimitedQueue passed in by a \"parent\" plugin (basically just AwsS3) using the top secret `__queue` option\n\n\n    if (this.opts.limit === 0 && !this.opts.__queue) {\n      this.uppy.log('[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0', 'warning');\n    }\n\n    this.uppy.log('[XHRUpload] Uploading...');\n    var files = fileIDs.map(function (fileID) {\n      return _this9.uppy.getFile(fileID);\n    });\n\n    if (this.opts.bundle) {\n      // if bundle: true, we don’t support remote uploads\n      var isSomeFileRemote = files.some(function (file) {\n        return file.isRemote;\n      });\n\n      if (isSomeFileRemote) {\n        throw new Error('Can’t upload remote files when the `bundle: true` option is set');\n      }\n\n      if (typeof this.opts.headers === 'function') {\n        throw new TypeError('`headers` may not be a function when the `bundle: true` option is set');\n      }\n\n      return this.uploadBundle(files);\n    }\n\n    return this.uploadFiles(files).then(function () {\n      return null;\n    });\n  };\n\n  _proto.install = function install() {\n    if (this.opts.bundle) {\n      var _this$uppy$getState2 = this.uppy.getState(),\n          capabilities = _this$uppy$getState2.capabilities;\n\n      this.uppy.setState({\n        capabilities: _extends({}, capabilities, {\n          individualCancellation: false\n        })\n      });\n    }\n\n    this.uppy.addUploader(this.handleUpload);\n  };\n\n  _proto.uninstall = function uninstall() {\n    if (this.opts.bundle) {\n      var _this$uppy$getState3 = this.uppy.getState(),\n          capabilities = _this$uppy$getState3.capabilities;\n\n      this.uppy.setState({\n        capabilities: _extends({}, capabilities, {\n          individualCancellation: true\n        })\n      });\n    }\n\n    this.uppy.removeUploader(this.handleUpload);\n  };\n\n  return XHRUpload;\n}(Plugin), _class.VERSION = \"1.7.5\", _temp);","'use strict';\n/**\n * Manages communications with Companion\n */\n\nvar RequestClient = require('./RequestClient');\n\nvar Provider = require('./Provider');\n\nvar SearchProvider = require('./SearchProvider');\n\nvar Socket = require('./Socket');\n\nmodule.exports = {\n  RequestClient: RequestClient,\n  Provider: Provider,\n  SearchProvider: SearchProvider,\n  Socket: Socket\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar AuthError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(AuthError, _Error);\n\n  function AuthError() {\n    var _this;\n\n    _this = _Error.call(this, 'Authorization required') || this;\n    _this.name = 'AuthError';\n    _this.isAuthError = true;\n    return _this;\n  }\n\n  return AuthError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nmodule.exports = AuthError;","var NetworkError = require('./NetworkError');\n/**\n * Wrapper around window.fetch that throws a NetworkError when appropriate\n */\n\n\nmodule.exports = function fetchWithNetworkError() {\n  return fetch.apply(void 0, arguments).catch(function (err) {\n    if (err.name === 'AbortError') {\n      throw err;\n    } else {\n      throw new NetworkError(err);\n    }\n  });\n};","'use strict';\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar qsStringify = require('qs-stringify');\n\nvar URL = require('url-parse');\n\nvar RequestClient = require('./RequestClient');\n\nvar tokenStorage = require('./tokenStorage');\n\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\n\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(Provider, _RequestClient);\n\n  function Provider(uppy, opts) {\n    var _this;\n\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    _this.tokenKey = \"companion-\" + _this.pluginId + \"-auth-token\";\n    _this.companionKeysParams = _this.opts.companionKeysParams;\n    _this.preAuthToken = null;\n    return _this;\n  }\n\n  var _proto = Provider.prototype;\n\n  _proto.headers = function headers() {\n    var _this2 = this;\n\n    return Promise.all([_RequestClient.prototype.headers.call(this), this.getAuthToken()]).then(function (_ref) {\n      var headers = _ref[0],\n          token = _ref[1];\n      var authHeaders = {};\n\n      if (token) {\n        authHeaders['uppy-auth-token'] = token;\n      }\n\n      if (_this2.companionKeysParams) {\n        authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n          params: _this2.companionKeysParams\n        }));\n      }\n\n      return _extends({}, headers, authHeaders);\n    });\n  };\n\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    response = _RequestClient.prototype.onReceiveResponse.call(this, response);\n    var plugin = this.uppy.getPlugin(this.pluginId);\n    var oldAuthenticated = plugin.getPluginState().authenticated;\n    var authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated: authenticated\n    });\n    return response;\n  } // @todo(i.olarewaju) consider whether or not this method should be exposed\n  ;\n\n  _proto.setAuthToken = function setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  };\n\n  _proto.getAuthToken = function getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  };\n\n  _proto.authUrl = function authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n\n    if (this.preAuthToken) {\n      queries.uppyPreAuthToken = this.preAuthToken;\n    }\n\n    var strigifiedQueries = qsStringify(queries);\n    strigifiedQueries = strigifiedQueries ? \"?\" + strigifiedQueries : strigifiedQueries;\n    return this.hostname + \"/\" + this.id + \"/connect\" + strigifiedQueries;\n  };\n\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/\" + this.id + \"/get/\" + id;\n  };\n\n  _proto.fetchPreAuthToken = function fetchPreAuthToken() {\n    var _this3 = this;\n\n    if (!this.companionKeysParams) {\n      return Promise.resolve();\n    }\n\n    return this.post(this.id + \"/preauth/\", {\n      params: this.companionKeysParams\n    }).then(function (res) {\n      _this3.preAuthToken = res.token;\n    }).catch(function (err) {\n      _this3.uppy.log(\"[CompanionClient] unable to fetch preAuthToken \" + err, 'warning');\n    });\n  };\n\n  _proto.list = function list(directory) {\n    return this.get(this.id + \"/list/\" + (directory || ''));\n  };\n\n  _proto.logout = function logout() {\n    var _this4 = this;\n\n    return this.get(this.id + \"/logout\").then(function (response) {\n      return Promise.all([response, _this4.uppy.getPlugin(_this4.pluginId).storage.removeItem(_this4.tokenKey)]);\n    }).then(function (_ref2) {\n      var response = _ref2[0];\n      return response;\n    });\n  };\n\n  Provider.initPlugin = function initPlugin(plugin, opts, defaultOpts) {\n    plugin.type = 'acquirer';\n    plugin.files = [];\n\n    if (defaultOpts) {\n      plugin.opts = _extends({}, defaultOpts, opts);\n    }\n\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n\n    if (opts.companionAllowedHosts) {\n      var pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(plugin.id + \": the option \\\"companionAllowedHosts\\\" must be one of string, Array, RegExp\");\n      }\n\n      plugin.opts.companionAllowedHosts = pattern;\n    } else {\n      // does not start with https://\n      if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n        plugin.opts.companionAllowedHosts = \"https://\" + opts.companionUrl.replace(/^\\/\\//, '');\n      } else {\n        plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n      }\n    }\n\n    plugin.storage = plugin.opts.storage || tokenStorage;\n  };\n\n  return Provider;\n}(RequestClient);","var has = Object.prototype.hasOwnProperty\n\n/**\n * Stringify an object for use in a query string.\n *\n * @param {Object} obj - The object.\n * @param {string} prefix - When nesting, the parent key.\n *     keys in `obj` will be stringified as `prefix[key]`.\n * @returns {string}\n */\n\nmodule.exports = function queryStringify (obj, prefix) {\n  var pairs = []\n  for (var key in obj) {\n    if (!has.call(obj, key)) {\n      continue\n    }\n\n    var value = obj[key]\n    var enkey = encodeURIComponent(key)\n    var pair\n    if (typeof value === 'object') {\n      pair = queryStringify(value, prefix ? prefix + '[' + enkey + ']' : enkey)\n    } else {\n      pair = (prefix ? prefix + '[' + enkey + ']' : enkey) + '=' + encodeURIComponent(value)\n    }\n    pairs.push(pair)\n  }\n  return pairs.join('&')\n}\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/\n  , whitespace = '[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]'\n  , left = new RegExp('^'+ whitespace +'+');\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n/**\n * This module serves as an Async wrapper for LocalStorage\n */\n\nmodule.exports.setItem = function (key, value) {\n  return new Promise(function (resolve) {\n    localStorage.setItem(key, value);\n    resolve();\n  });\n};\n\nmodule.exports.getItem = function (key) {\n  return Promise.resolve(localStorage.getItem(key));\n};\n\nmodule.exports.removeItem = function (key) {\n  return new Promise(function (resolve) {\n    localStorage.removeItem(key);\n    resolve();\n  });\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar RequestClient = require('./RequestClient');\n\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\n\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(SearchProvider, _RequestClient);\n\n  function SearchProvider(uppy, opts) {\n    var _this;\n\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    return _this;\n  }\n\n  var _proto = SearchProvider.prototype;\n\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/search/\" + this.id + \"/get/\" + id;\n  };\n\n  _proto.search = function search(text, queries) {\n    queries = queries ? \"&\" + queries : '';\n    return this.get(\"search/\" + this.id + \"/list?q=\" + encodeURIComponent(text) + queries);\n  };\n\n  return SearchProvider;\n}(RequestClient);","var ee = require('namespace-emitter');\n\nmodule.exports = /*#__PURE__*/function () {\n  function UppySocket(opts) {\n    this.opts = opts;\n    this._queued = [];\n    this.isOpen = false;\n    this.emitter = ee();\n    this._handleMessage = this._handleMessage.bind(this);\n    this.close = this.close.bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n    this.once = this.once.bind(this);\n    this.send = this.send.bind(this);\n\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n\n  var _proto = UppySocket.prototype;\n\n  _proto.open = function open() {\n    var _this = this;\n\n    this.socket = new WebSocket(this.opts.target);\n\n    this.socket.onopen = function (e) {\n      _this.isOpen = true;\n\n      while (_this._queued.length > 0 && _this.isOpen) {\n        var first = _this._queued[0];\n\n        _this.send(first.action, first.payload);\n\n        _this._queued = _this._queued.slice(1);\n      }\n    };\n\n    this.socket.onclose = function (e) {\n      _this.isOpen = false;\n    };\n\n    this.socket.onmessage = this._handleMessage;\n  };\n\n  _proto.close = function close() {\n    if (this.socket) {\n      this.socket.close();\n    }\n  };\n\n  _proto.send = function send(action, payload) {\n    // attach uuid\n    if (!this.isOpen) {\n      this._queued.push({\n        action: action,\n        payload: payload\n      });\n\n      return;\n    }\n\n    this.socket.send(JSON.stringify({\n      action: action,\n      payload: payload\n    }));\n  };\n\n  _proto.on = function on(action, handler) {\n    this.emitter.on(action, handler);\n  };\n\n  _proto.emit = function emit(action, payload) {\n    this.emitter.emit(action, payload);\n  };\n\n  _proto.once = function once(action, handler) {\n    this.emitter.once(action, handler);\n  };\n\n  _proto._handleMessage = function _handleMessage(e) {\n    try {\n      var message = JSON.parse(e.data);\n      this.emit(message.action, message.payload);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return UppySocket;\n}();","var throttle = require('lodash.throttle');\n\nfunction _emitSocketProgress(uploader, progressData, file) {\n  var progress = progressData.progress,\n      bytesUploaded = progressData.bytesUploaded,\n      bytesTotal = progressData.bytesTotal;\n\n  if (progress) {\n    uploader.uppy.log(\"Upload progress: \" + progress);\n    uploader.uppy.emit('upload-progress', file, {\n      uploader: uploader,\n      bytesUploaded: bytesUploaded,\n      bytesTotal: bytesTotal\n    });\n  }\n}\n\nmodule.exports = throttle(_emitSocketProgress, 300, {\n  leading: true,\n  trailing: true\n});","module.exports = function getSocketHost(url) {\n  // get the host domain\n  var regex = /^(?:https?:\\/\\/|\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^\\n]+)/i;\n  var host = regex.exec(url)[1];\n  var socketProtocol = /^http:\\/\\//i.test(url) ? 'ws' : 'wss';\n  return socketProtocol + \"://\" + host;\n};","module.exports = function settle(promises) {\n  var resolutions = [];\n  var rejections = [];\n\n  function resolved(value) {\n    resolutions.push(value);\n  }\n\n  function rejected(error) {\n    rejections.push(error);\n  }\n\n  var wait = Promise.all(promises.map(function (promise) {\n    return promise.then(resolved, rejected);\n  }));\n  return wait.then(function () {\n    return {\n      successful: resolutions,\n      failed: rejections\n    };\n  });\n};","/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nmodule.exports = /*#__PURE__*/function () {\n  function EventTracker(emitter) {\n    this._events = [];\n    this._emitter = emitter;\n  }\n\n  var _proto = EventTracker.prototype;\n\n  _proto.on = function on(event, fn) {\n    this._events.push([event, fn]);\n\n    return this._emitter.on(event, fn);\n  };\n\n  _proto.remove = function remove() {\n    var _this = this;\n\n    this._events.forEach(function (_ref) {\n      var event = _ref[0],\n          fn = _ref[1];\n\n      _this._emitter.off(event, fn);\n    });\n  };\n\n  return EventTracker;\n}();","/**\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n */\nvar ProgressTimeout = /*#__PURE__*/function () {\n  function ProgressTimeout(timeout, timeoutHandler) {\n    this._timeout = timeout;\n    this._onTimedOut = timeoutHandler;\n    this._isDone = false;\n    this._aliveTimer = null;\n    this._onTimedOut = this._onTimedOut.bind(this);\n  }\n\n  var _proto = ProgressTimeout.prototype;\n\n  _proto.progress = function progress() {\n    // Some browsers fire another progress event when the upload is\n    // cancelled, so we have to ignore progress after the timer was\n    // told to stop.\n    if (this._isDone) return;\n\n    if (this._timeout > 0) {\n      if (this._aliveTimer) clearTimeout(this._aliveTimer);\n      this._aliveTimer = setTimeout(this._onTimedOut, this._timeout);\n    }\n  };\n\n  _proto.done = function done() {\n    if (this._aliveTimer) {\n      clearTimeout(this._aliveTimer);\n      this._aliveTimer = null;\n    }\n\n    this._isDone = true;\n  };\n\n  return ProgressTimeout;\n}();\n\nmodule.exports = ProgressTimeout;","var findIndex = require('./findIndex');\n\nfunction createCancelError() {\n  return new Error('Cancelled');\n}\n\nmodule.exports = /*#__PURE__*/function () {\n  function RateLimitedQueue(limit) {\n    if (typeof limit !== 'number' || limit === 0) {\n      this.limit = Infinity;\n    } else {\n      this.limit = limit;\n    }\n\n    this.activeRequests = 0;\n    this.queuedHandlers = [];\n  }\n\n  var _proto = RateLimitedQueue.prototype;\n\n  _proto._call = function _call(fn) {\n    var _this = this;\n\n    this.activeRequests += 1;\n    var _done = false;\n    var cancelActive;\n\n    try {\n      cancelActive = fn();\n    } catch (err) {\n      this.activeRequests -= 1;\n      throw err;\n    }\n\n    return {\n      abort: function abort() {\n        if (_done) return;\n        _done = true;\n        _this.activeRequests -= 1;\n        cancelActive();\n\n        _this._queueNext();\n      },\n      done: function done() {\n        if (_done) return;\n        _done = true;\n        _this.activeRequests -= 1;\n\n        _this._queueNext();\n      }\n    };\n  };\n\n  _proto._queueNext = function _queueNext() {\n    var _this2 = this;\n\n    // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n    // one by one without continuously _advancing_ it (and starting new tasks before immediately\n    // aborting them)\n    Promise.resolve().then(function () {\n      _this2._next();\n    });\n  };\n\n  _proto._next = function _next() {\n    if (this.activeRequests >= this.limit) {\n      return;\n    }\n\n    if (this.queuedHandlers.length === 0) {\n      return;\n    } // Dispatch the next request, and update the abort/done handlers\n    // so that cancelling it does the Right Thing (and doesn't just try\n    // to dequeue an already-running request).\n\n\n    var next = this.queuedHandlers.shift();\n\n    var handler = this._call(next.fn);\n\n    next.abort = handler.abort;\n    next.done = handler.done;\n  };\n\n  _proto._queue = function _queue(fn, options) {\n    var _this3 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var handler = {\n      fn: fn,\n      priority: options.priority || 0,\n      abort: function abort() {\n        _this3._dequeue(handler);\n      },\n      done: function done() {\n        throw new Error('Cannot mark a queued request as done: this indicates a bug');\n      }\n    };\n    var index = findIndex(this.queuedHandlers, function (other) {\n      return handler.priority > other.priority;\n    });\n\n    if (index === -1) {\n      this.queuedHandlers.push(handler);\n    } else {\n      this.queuedHandlers.splice(index, 0, handler);\n    }\n\n    return handler;\n  };\n\n  _proto._dequeue = function _dequeue(handler) {\n    var index = this.queuedHandlers.indexOf(handler);\n\n    if (index !== -1) {\n      this.queuedHandlers.splice(index, 1);\n    }\n  };\n\n  _proto.run = function run(fn, queueOptions) {\n    if (this.activeRequests < this.limit) {\n      return this._call(fn);\n    }\n\n    return this._queue(fn, queueOptions);\n  };\n\n  _proto.wrapPromiseFunction = function wrapPromiseFunction(fn, queueOptions) {\n    var _this4 = this;\n\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var queuedRequest;\n      var outerPromise = new Promise(function (resolve, reject) {\n        queuedRequest = _this4.run(function () {\n          var cancelError;\n          var innerPromise;\n\n          try {\n            innerPromise = Promise.resolve(fn.apply(void 0, args));\n          } catch (err) {\n            innerPromise = Promise.reject(err);\n          }\n\n          innerPromise.then(function (result) {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              resolve(result);\n            }\n          }, function (err) {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              reject(err);\n            }\n          });\n          return function () {\n            cancelError = createCancelError();\n          };\n        }, queueOptions);\n      });\n\n      outerPromise.abort = function () {\n        queuedRequest.abort();\n      };\n\n      return outerPromise;\n    };\n  };\n\n  return RateLimitedQueue;\n}();","function isNetworkError(xhr) {\n  if (!xhr) {\n    return false;\n  }\n\n  return xhr.readyState !== 0 && xhr.readyState !== 4 || xhr.status === 0;\n}\n\nmodule.exports = isNetworkError;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  inverse: PropTypes.bool,\n  color: PropTypes.string,\n  body: PropTypes.bool,\n  outline: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar Card = function Card(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      color = props.color,\n      body = props.body,\n      inverse = props.inverse,\n      outline = props.outline,\n      Tag = props.tag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"color\", \"body\", \"inverse\", \"outline\", \"tag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card', inverse ? 'text-white' : false, body ? 'card-body' : false, color ? (outline ? 'border' : 'bg') + \"-\" + color : false), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    ref: innerRef\n  }));\n};\n\nCard.propTypes = propTypes;\nCard.defaultProps = defaultProps;\nexport default Card;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar rowColWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nvar rowColsPropType = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\nvar propTypes = {\n  tag: tagPropType,\n  noGutters: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  form: PropTypes.bool,\n  xs: rowColsPropType,\n  sm: rowColsPropType,\n  md: rowColsPropType,\n  lg: rowColsPropType,\n  xl: rowColsPropType\n};\nvar defaultProps = {\n  tag: 'div',\n  widths: rowColWidths\n};\n\nvar Row = function Row(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      noGutters = props.noGutters,\n      Tag = props.tag,\n      form = props.form,\n      widths = props.widths,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"noGutters\", \"tag\", \"form\", \"widths\"]);\n\n  var colClasses = [];\n  widths.forEach(function (colWidth, i) {\n    var colSize = props[colWidth];\n    delete attributes[colWidth];\n\n    if (!colSize) {\n      return;\n    }\n\n    var isXs = !i;\n    colClasses.push(isXs ? \"row-cols-\" + colSize : \"row-cols-\" + colWidth + \"-\" + colSize);\n  });\n  var classes = mapToCssModules(classNames(className, noGutters ? 'no-gutters' : null, form ? 'form-row' : 'row', colClasses), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nRow.propTypes = propTypes;\nRow.defaultProps = defaultProps;\nexport default Row;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType, isObject } from './utils';\nvar colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nvar stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\nvar columnProps = PropTypes.oneOfType([PropTypes.bool, PropTypes.number, PropTypes.string, PropTypes.shape({\n  size: PropTypes.oneOfType([PropTypes.bool, PropTypes.number, PropTypes.string]),\n  order: stringOrNumberProp,\n  offset: stringOrNumberProp\n})]);\nvar propTypes = {\n  tag: tagPropType,\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  widths: PropTypes.array\n};\nvar defaultProps = {\n  tag: 'div',\n  widths: colWidths\n};\n\nvar getColumnSizeClass = function getColumnSizeClass(isXs, colWidth, colSize) {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : \"col-\" + colWidth;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : \"col-\" + colWidth + \"-auto\";\n  }\n\n  return isXs ? \"col-\" + colSize : \"col-\" + colWidth + \"-\" + colSize;\n};\n\nvar Col = function Col(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      widths = props.widths,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"widths\", \"tag\"]);\n\n  var colClasses = [];\n  widths.forEach(function (colWidth, i) {\n    var columnProp = props[colWidth];\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    var isXs = !i;\n\n    if (isObject(columnProp)) {\n      var _classNames;\n\n      var colSizeInterfix = isXs ? '-' : \"-\" + colWidth + \"-\";\n      var colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n      colClasses.push(mapToCssModules(classNames((_classNames = {}, _classNames[colClass] = columnProp.size || columnProp.size === '', _classNames[\"order\" + colSizeInterfix + columnProp.order] = columnProp.order || columnProp.order === 0, _classNames[\"offset\" + colSizeInterfix + columnProp.offset] = columnProp.offset || columnProp.offset === 0, _classNames)), cssModule));\n    } else {\n      var _colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n\n      colClasses.push(_colClass);\n    }\n  });\n\n  if (!colClasses.length) {\n    colClasses.push('col');\n  }\n\n  var classes = mapToCssModules(classNames(className, colClasses), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCol.propTypes = propTypes;\nCol.defaultProps = defaultProps;\nexport default Col;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  listTag: tagPropType,\n  className: PropTypes.string,\n  listClassName: PropTypes.string,\n  cssModule: PropTypes.object,\n  children: PropTypes.node,\n  'aria-label': PropTypes.string\n};\nvar defaultProps = {\n  tag: 'nav',\n  listTag: 'ol',\n  'aria-label': 'breadcrumb'\n};\n\nvar Breadcrumb = function Breadcrumb(props) {\n  var className = props.className,\n      listClassName = props.listClassName,\n      cssModule = props.cssModule,\n      children = props.children,\n      Tag = props.tag,\n      ListTag = props.listTag,\n      label = props['aria-label'],\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"listClassName\", \"cssModule\", \"children\", \"tag\", \"listTag\", \"aria-label\"]);\n\n  var classes = mapToCssModules(classNames(className), cssModule);\n  var listClasses = mapToCssModules(classNames('breadcrumb', listClassName), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    \"aria-label\": label\n  }), /*#__PURE__*/React.createElement(ListTag, {\n    className: listClasses\n  }, children));\n};\n\nBreadcrumb.propTypes = propTypes;\nBreadcrumb.defaultProps = defaultProps;\nexport default Breadcrumb;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'li'\n};\n\nvar BreadcrumbItem = function BreadcrumbItem(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      active = props.active,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"active\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, active ? 'active' : false, 'breadcrumb-item'), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    \"aria-current\": active ? 'page' : undefined\n  }));\n};\n\nBreadcrumbItem.propTypes = propTypes;\nBreadcrumbItem.defaultProps = defaultProps;\nexport default BreadcrumbItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\n\n/* eslint react/prefer-stateless-function: 0 */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, warnOnce, tagPropType } from './utils';\nvar propTypes = {\n  children: PropTypes.node,\n  type: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  bsSize: PropTypes.string,\n  valid: PropTypes.bool,\n  invalid: PropTypes.bool,\n  tag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func, PropTypes.string]),\n  plaintext: PropTypes.bool,\n  addon: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  type: 'text'\n};\n\nvar Input = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Input, _React$Component);\n\n  function Input(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.getRef = _this.getRef.bind(_assertThisInitialized(_this));\n    _this.focus = _this.focus.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Input.prototype;\n\n  _proto.getRef = function getRef(ref) {\n    if (this.props.innerRef) {\n      this.props.innerRef(ref);\n    }\n\n    this.ref = ref;\n  };\n\n  _proto.focus = function focus() {\n    if (this.ref) {\n      this.ref.focus();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        className = _this$props.className,\n        cssModule = _this$props.cssModule,\n        type = _this$props.type,\n        bsSize = _this$props.bsSize,\n        valid = _this$props.valid,\n        invalid = _this$props.invalid,\n        tag = _this$props.tag,\n        addon = _this$props.addon,\n        plaintext = _this$props.plaintext,\n        innerRef = _this$props.innerRef,\n        attributes = _objectWithoutPropertiesLoose(_this$props, [\"className\", \"cssModule\", \"type\", \"bsSize\", \"valid\", \"invalid\", \"tag\", \"addon\", \"plaintext\", \"innerRef\"]);\n\n    var checkInput = ['radio', 'checkbox'].indexOf(type) > -1;\n    var isNotaNumber = new RegExp('\\\\D', 'g');\n    var fileInput = type === 'file';\n    var textareaInput = type === 'textarea';\n    var selectInput = type === 'select';\n    var rangeInput = type === 'range';\n    var Tag = tag || (selectInput || textareaInput ? type : 'input');\n    var formControlClass = 'form-control';\n\n    if (plaintext) {\n      formControlClass = formControlClass + \"-plaintext\";\n      Tag = tag || 'input';\n    } else if (fileInput) {\n      formControlClass = formControlClass + \"-file\";\n    } else if (rangeInput) {\n      formControlClass = formControlClass + \"-range\";\n    } else if (checkInput) {\n      if (addon) {\n        formControlClass = null;\n      } else {\n        formControlClass = 'form-check-input';\n      }\n    }\n\n    if (attributes.size && isNotaNumber.test(attributes.size)) {\n      warnOnce('Please use the prop \"bsSize\" instead of the \"size\" to bootstrap\\'s input sizing.');\n      bsSize = attributes.size;\n      delete attributes.size;\n    }\n\n    var classes = mapToCssModules(classNames(className, invalid && 'is-invalid', valid && 'is-valid', bsSize ? \"form-control-\" + bsSize : false, formControlClass), cssModule);\n\n    if (Tag === 'input' || tag && typeof tag === 'function') {\n      attributes.type = type;\n    }\n\n    if (attributes.children && !(plaintext || type === 'select' || typeof Tag !== 'string' || Tag === 'select')) {\n      warnOnce(\"Input with a type of \\\"\" + type + \"\\\" cannot have children. Please use \\\"value\\\"/\\\"defaultValue\\\" instead.\");\n      delete attributes.children;\n    }\n\n    return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n      ref: innerRef,\n      className: classes,\n      \"aria-invalid\": invalid\n    }));\n  };\n\n  return Input;\n}(React.Component);\n\nInput.propTypes = propTypes;\nInput.defaultProps = defaultProps;\nexport default Input;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType, isObject } from './utils';\nvar colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nvar stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\nvar columnProps = PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number, PropTypes.shape({\n  size: stringOrNumberProp,\n  order: stringOrNumberProp,\n  offset: stringOrNumberProp\n})]);\nvar propTypes = {\n  children: PropTypes.node,\n  hidden: PropTypes.bool,\n  check: PropTypes.bool,\n  size: PropTypes.string,\n  for: PropTypes.string,\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  widths: PropTypes.array\n};\nvar defaultProps = {\n  tag: 'label',\n  widths: colWidths\n};\n\nvar getColumnSizeClass = function getColumnSizeClass(isXs, colWidth, colSize) {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : \"col-\" + colWidth;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : \"col-\" + colWidth + \"-auto\";\n  }\n\n  return isXs ? \"col-\" + colSize : \"col-\" + colWidth + \"-\" + colSize;\n};\n\nvar Label = function Label(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      hidden = props.hidden,\n      widths = props.widths,\n      Tag = props.tag,\n      check = props.check,\n      size = props.size,\n      htmlFor = props.for,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"hidden\", \"widths\", \"tag\", \"check\", \"size\", \"for\"]);\n\n  var colClasses = [];\n  widths.forEach(function (colWidth, i) {\n    var columnProp = props[colWidth];\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    var isXs = !i;\n    var colClass;\n\n    if (isObject(columnProp)) {\n      var _classNames;\n\n      var colSizeInterfix = isXs ? '-' : \"-\" + colWidth + \"-\";\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n      colClasses.push(mapToCssModules(classNames((_classNames = {}, _classNames[colClass] = columnProp.size || columnProp.size === '', _classNames[\"order\" + colSizeInterfix + columnProp.order] = columnProp.order || columnProp.order === 0, _classNames[\"offset\" + colSizeInterfix + columnProp.offset] = columnProp.offset || columnProp.offset === 0, _classNames))), cssModule);\n    } else {\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n      colClasses.push(colClass);\n    }\n  });\n  var classes = mapToCssModules(classNames(className, hidden ? 'sr-only' : false, check ? 'form-check-label' : false, size ? \"col-form-label-\" + size : false, colClasses, colClasses.length ? 'col-form-label' : false), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({\n    htmlFor: htmlFor\n  }, attributes, {\n    className: classes\n  }));\n};\n\nLabel.propTypes = propTypes;\nLabel.defaultProps = defaultProps;\nexport default Label;","'use strict';\n\nvar _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar AuthError = require('./AuthError');\n\nvar fetchWithNetworkError = require('@uppy/utils/lib/fetchWithNetworkError'); // Remove the trailing slash so we can always safely append /xyz.\n\n\nfunction stripSlash(url) {\n  return url.replace(/\\/$/, '');\n}\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function () {\n  function RequestClient(uppy, opts) {\n    this.uppy = uppy;\n    this.opts = opts;\n    this.onReceiveResponse = this.onReceiveResponse.bind(this);\n    this.allowedHeaders = ['accept', 'content-type', 'uppy-auth-token'];\n    this.preflightDone = false;\n  }\n\n  var _proto = RequestClient.prototype;\n\n  _proto.headers = function headers() {\n    var userHeaders = this.opts.companionHeaders || this.opts.serverHeaders || {};\n    return Promise.resolve(_extends({}, this.defaultHeaders, userHeaders));\n  };\n\n  _proto._getPostResponseFunc = function _getPostResponseFunc(skip) {\n    var _this = this;\n\n    return function (response) {\n      if (!skip) {\n        return _this.onReceiveResponse(response);\n      }\n\n      return response;\n    };\n  };\n\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    var state = this.uppy.getState();\n    var companion = state.companion || {};\n    var host = this.opts.companionUrl;\n    var headers = response.headers; // Store the self-identified domain name for the Companion instance we just hit.\n\n    if (headers.has('i-am') && headers.get('i-am') !== companion[host]) {\n      var _extends2;\n\n      this.uppy.setState({\n        companion: _extends({}, companion, (_extends2 = {}, _extends2[host] = headers.get('i-am'), _extends2))\n      });\n    }\n\n    return response;\n  };\n\n  _proto._getUrl = function _getUrl(url) {\n    if (/^(https?:|)\\/\\//.test(url)) {\n      return url;\n    }\n\n    return this.hostname + \"/\" + url;\n  };\n\n  _proto._json = function _json(res) {\n    if (res.status === 401) {\n      throw new AuthError();\n    }\n\n    if (res.status < 200 || res.status > 300) {\n      var errMsg = \"Failed request with status: \" + res.status + \". \" + res.statusText;\n      return res.json().then(function (errData) {\n        errMsg = errData.message ? errMsg + \" message: \" + errData.message : errMsg;\n        errMsg = errData.requestId ? errMsg + \" request-Id: \" + errData.requestId : errMsg;\n        throw new Error(errMsg);\n      }).catch(function () {\n        throw new Error(errMsg);\n      });\n    }\n\n    return res.json();\n  };\n\n  _proto.preflight = function preflight(path) {\n    var _this2 = this;\n\n    if (this.preflightDone) {\n      return Promise.resolve(this.allowedHeaders.slice());\n    }\n\n    return fetch(this._getUrl(path), {\n      method: 'OPTIONS'\n    }).then(function (response) {\n      if (response.headers.has('access-control-allow-headers')) {\n        _this2.allowedHeaders = response.headers.get('access-control-allow-headers').split(',').map(function (headerName) {\n          return headerName.trim().toLowerCase();\n        });\n      }\n\n      _this2.preflightDone = true;\n      return _this2.allowedHeaders.slice();\n    }).catch(function (err) {\n      _this2.uppy.log(\"[CompanionClient] unable to make preflight request \" + err, 'warning');\n\n      _this2.preflightDone = true;\n      return _this2.allowedHeaders.slice();\n    });\n  };\n\n  _proto.preflightAndHeaders = function preflightAndHeaders(path) {\n    var _this3 = this;\n\n    return Promise.all([this.preflight(path), this.headers()]).then(function (_ref) {\n      var allowedHeaders = _ref[0],\n          headers = _ref[1];\n      // filter to keep only allowed Headers\n      Object.keys(headers).forEach(function (header) {\n        if (allowedHeaders.indexOf(header.toLowerCase()) === -1) {\n          _this3.uppy.log(\"[CompanionClient] excluding unallowed header \" + header);\n\n          delete headers[header];\n        }\n      });\n      return headers;\n    });\n  };\n\n  _proto.get = function get(path, skipPostResponse) {\n    var _this4 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this4._getUrl(path), {\n        method: 'get',\n        headers: headers,\n        credentials: _this4.opts.companionCookiesRule || 'same-origin'\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this4._json(res);\n    }).catch(function (err) {\n      if (!err.isAuthError) {\n        err.message = \"Could not get \" + _this4._getUrl(path) + \". \" + err.message;\n      }\n\n      return Promise.reject(err);\n    });\n  };\n\n  _proto.post = function post(path, data, skipPostResponse) {\n    var _this5 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this5._getUrl(path), {\n        method: 'post',\n        headers: headers,\n        credentials: _this5.opts.companionCookiesRule || 'same-origin',\n        body: JSON.stringify(data)\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this5._json(res);\n    }).catch(function (err) {\n      if (!err.isAuthError) {\n        err.message = \"Could not post \" + _this5._getUrl(path) + \". \" + err.message;\n      }\n\n      return Promise.reject(err);\n    });\n  };\n\n  _proto.delete = function _delete(path, data, skipPostResponse) {\n    var _this6 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this6.hostname + \"/\" + path, {\n        method: 'delete',\n        headers: headers,\n        credentials: _this6.opts.companionCookiesRule || 'same-origin',\n        body: data ? JSON.stringify(data) : null\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this6._json(res);\n    }).catch(function (err) {\n      if (!err.isAuthError) {\n        err.message = \"Could not delete \" + _this6._getUrl(path) + \". \" + err.message;\n      }\n\n      return Promise.reject(err);\n    });\n  };\n\n  _createClass(RequestClient, [{\n    key: \"hostname\",\n    get: function get() {\n      var _this$uppy$getState = this.uppy.getState(),\n          companion = _this$uppy$getState.companion;\n\n      var host = this.opts.companionUrl;\n      return stripSlash(companion && companion[host] ? companion[host] : host);\n    }\n  }, {\n    key: \"defaultHeaders\",\n    get: function get() {\n      return {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        'Uppy-Versions': \"@uppy/companion-client=\" + RequestClient.VERSION\n      };\n    }\n  }]);\n\n  return RequestClient;\n}(), _class.VERSION = \"1.10.2\", _temp);"],"sourceRoot":""}